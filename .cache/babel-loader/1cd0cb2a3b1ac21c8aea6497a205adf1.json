{"ast":null,"code":"var _jsxFileName = \"/home/pro/Solutions/drawboard-light/src/components/ContextMenu.tsx\";\nimport React from \"react\";\nimport { Popover } from \"./Popover\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\nimport \"./ContextMenu.css\";\n\nfunction ContextMenu(_ref) {\n  var options = _ref.options,\n      onCloseRequest = _ref.onCloseRequest,\n      top = _ref.top,\n      left = _ref.left;\n  return React.createElement(Popover, {\n    onCloseRequest: onCloseRequest,\n    top: top,\n    left: left,\n    fitInViewport: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"context-menu\",\n    onContextMenu: function onContextMenu(event) {\n      return event.preventDefault();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27\n    },\n    __self: this\n  }, options.map(function (option, idx) {\n    return React.createElement(\"li\", {\n      key: idx,\n      onClick: onCloseRequest,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, React.createElement(ContextMenuOption, Object.assign({}, option, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    })));\n  })));\n}\n\nfunction ContextMenuOption(_ref2) {\n  var label = _ref2.label,\n      action = _ref2.action;\n  return React.createElement(\"button\", {\n    className: \"context-menu-option\",\n    onClick: action,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, label);\n}\n\nvar contextMenuNode;\n\nfunction getContextMenuNode() {\n  if (contextMenuNode) {\n    return contextMenuNode;\n  }\n\n  var div = document.createElement(\"div\");\n  document.body.appendChild(div);\n  return contextMenuNode = div;\n}\n\nfunction handleClose() {\n  unmountComponentAtNode(getContextMenuNode());\n}\n\nexport default {\n  push: function push(params) {\n    var options = Array.of();\n    params.options.forEach(function (option) {\n      if (option) {\n        options.push(option);\n      }\n    });\n\n    if (options.length) {\n      render(React.createElement(ContextMenu, {\n        top: params.top,\n        left: params.left,\n        options: options,\n        onCloseRequest: handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), getContextMenuNode());\n    }\n  }\n};","map":{"version":3,"sources":["/home/pro/Solutions/drawboard-light/src/components/ContextMenu.tsx"],"names":["React","Popover","render","unmountComponentAtNode","ContextMenu","options","onCloseRequest","top","left","event","preventDefault","map","option","idx","ContextMenuOption","label","action","contextMenuNode","getContextMenuNode","div","document","createElement","body","appendChild","handleClose","push","params","Array","of","forEach","length"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,SAASC,MAAT,EAAiBC,sBAAjB,QAA+C,WAA/C;AAEA,OAAO,mBAAP;;AAcA,SAASC,WAAT,OAAoE;AAAA,MAA7CC,OAA6C,QAA7CA,OAA6C;AAAA,MAApCC,cAAoC,QAApCA,cAAoC;AAAA,MAApBC,GAAoB,QAApBA,GAAoB;AAAA,MAAfC,IAAe,QAAfA,IAAe;AAClE,SACE,oBAAC,OAAD;AACE,IAAA,cAAc,EAAEF,cADlB;AAEE,IAAA,GAAG,EAAEC,GAFP;AAGE,IAAA,IAAI,EAAEC,IAHR;AAIE,IAAA,aAAa,EAAE,IAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME;AACE,IAAA,SAAS,EAAC,cADZ;AAEE,IAAA,aAAa,EAAE,uBAAAC,KAAK;AAAA,aAAIA,KAAK,CAACC,cAAN,EAAJ;AAAA,KAFtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIGL,OAAO,CAACM,GAAR,CAAY,UAACC,MAAD,EAASC,GAAT;AAAA,WACX;AAAI,MAAA,GAAG,EAAEA,GAAT;AAAc,MAAA,OAAO,EAAEP,cAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,iBAAD,oBAAuBM,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADF,CADW;AAAA,GAAZ,CAJH,CANF,CADF;AAmBD;;AAED,SAASE,iBAAT,QAAiE;AAAA,MAApCC,KAAoC,SAApCA,KAAoC;AAAA,MAA7BC,MAA6B,SAA7BA,MAA6B;AAC/D,SACE;AAAQ,IAAA,SAAS,EAAC,qBAAlB;AAAwC,IAAA,OAAO,EAAEA,MAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,KADH,CADF;AAKD;;AAED,IAAIE,eAAJ;;AACA,SAASC,kBAAT,GAA8C;AAC5C,MAAID,eAAJ,EAAqB;AACnB,WAAOA,eAAP;AACD;;AACD,MAAME,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACAD,EAAAA,QAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0BJ,GAA1B;AACA,SAAQF,eAAe,GAAGE,GAA1B;AACD;;AAQD,SAASK,WAAT,GAAuB;AACrBrB,EAAAA,sBAAsB,CAACe,kBAAkB,EAAnB,CAAtB;AACD;;AAED,eAAe;AACbO,EAAAA,IADa,gBACRC,MADQ,EACmB;AAC9B,QAAMrB,OAAO,GAAGsB,KAAK,CAACC,EAAN,EAAhB;AACAF,IAAAA,MAAM,CAACrB,OAAP,CAAewB,OAAf,CAAuB,UAAAjB,MAAM,EAAI;AAC/B,UAAIA,MAAJ,EAAY;AACVP,QAAAA,OAAO,CAACoB,IAAR,CAAab,MAAb;AACD;AACF,KAJD;;AAKA,QAAIP,OAAO,CAACyB,MAAZ,EAAoB;AAClB5B,MAAAA,MAAM,CACJ,oBAAC,WAAD;AACE,QAAA,GAAG,EAAEwB,MAAM,CAACnB,GADd;AAEE,QAAA,IAAI,EAAEmB,MAAM,CAAClB,IAFf;AAGE,QAAA,OAAO,EAAEH,OAHX;AAIE,QAAA,cAAc,EAAEmB,WAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADI,EAOJN,kBAAkB,EAPd,CAAN;AASD;AACF;AAnBY,CAAf","sourcesContent":["import React from \"react\";\nimport { Popover } from \"./Popover\";\nimport { render, unmountComponentAtNode } from \"react-dom\";\n\nimport \"./ContextMenu.css\";\n\ntype ContextMenuOption = {\n  label: string;\n  action(): void;\n};\n\ntype Props = {\n  options: ContextMenuOption[];\n  onCloseRequest?(): void;\n  top: number;\n  left: number;\n};\n\nfunction ContextMenu({ options, onCloseRequest, top, left }: Props) {\n  return (\n    <Popover\n      onCloseRequest={onCloseRequest}\n      top={top}\n      left={left}\n      fitInViewport={true}\n    >\n      <ul\n        className=\"context-menu\"\n        onContextMenu={event => event.preventDefault()}\n      >\n        {options.map((option, idx) => (\n          <li key={idx} onClick={onCloseRequest}>\n            <ContextMenuOption {...option} />\n          </li>\n        ))}\n      </ul>\n    </Popover>\n  );\n}\n\nfunction ContextMenuOption({ label, action }: ContextMenuOption) {\n  return (\n    <button className=\"context-menu-option\" onClick={action}>\n      {label}\n    </button>\n  );\n}\n\nlet contextMenuNode: HTMLDivElement;\nfunction getContextMenuNode(): HTMLDivElement {\n  if (contextMenuNode) {\n    return contextMenuNode;\n  }\n  const div = document.createElement(\"div\");\n  document.body.appendChild(div);\n  return (contextMenuNode = div);\n}\n\ntype ContextMenuParams = {\n  options: (ContextMenuOption | false | null | undefined)[];\n  top: number;\n  left: number;\n};\n\nfunction handleClose() {\n  unmountComponentAtNode(getContextMenuNode());\n}\n\nexport default {\n  push(params: ContextMenuParams) {\n    const options = Array.of<ContextMenuOption>();\n    params.options.forEach(option => {\n      if (option) {\n        options.push(option);\n      }\n    });\n    if (options.length) {\n      render(\n        <ContextMenu\n          top={params.top}\n          left={params.left}\n          options={options}\n          onCloseRequest={handleClose}\n        />,\n        getContextMenuNode(),\n      );\n    }\n  },\n};\n"]},"metadata":{},"sourceType":"module"}