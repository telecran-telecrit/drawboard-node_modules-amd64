{"ast":null,"code":"import _toConsumableArray from \"/home/pro/Solutions/drawboard-light/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { getZoomOrigin } from \"./scene\";\nexport var SVG_NS = \"http://www.w3.org/2000/svg\";\nexport function getDateTime() {\n  var date = new Date();\n  var year = date.getFullYear();\n  var month = date.getMonth() + 1;\n  var day = date.getDate();\n  var hr = date.getHours();\n  var min = date.getMinutes();\n  var secs = date.getSeconds();\n  return \"\".concat(year).concat(month).concat(day).concat(hr).concat(min).concat(secs);\n}\nexport function capitalizeString(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nexport function isToolIcon(target) {\n  return target instanceof HTMLElement && target.className.includes(\"ToolIcon\");\n}\nexport function isInputLike(target) {\n  return target instanceof HTMLElement && target.dataset.type === \"wysiwyg\" || target instanceof HTMLBRElement || // newline in wysiwyg\n  target instanceof HTMLInputElement || target instanceof HTMLTextAreaElement || target instanceof HTMLSelectElement;\n}\nexport function isWritableElement(target) {\n  return target instanceof HTMLElement && target.dataset.type === \"wysiwyg\" || target instanceof HTMLBRElement || // newline in wysiwyg\n  target instanceof HTMLTextAreaElement || target instanceof HTMLInputElement && (target.type === \"text\" || target.type === \"number\");\n} // https://github.com/grassator/canvas-text-editor/blob/master/lib/FontMetrics.js\n\nexport function measureText(text, font) {\n  var line = document.createElement(\"div\");\n  var body = document.body;\n  line.style.position = \"absolute\";\n  line.style.whiteSpace = \"nowrap\";\n  line.style.font = font;\n  body.appendChild(line); // Now we can measure width and height of the letter\n\n  line.innerText = text;\n  var width = line.offsetWidth;\n  var height = line.offsetHeight; // Now creating 1px sized item that will be aligned to baseline\n  // to calculate baseline shift\n\n  var span = document.createElement(\"span\");\n  span.style.display = \"inline-block\";\n  span.style.overflow = \"hidden\";\n  span.style.width = \"1px\";\n  span.style.height = \"1px\";\n  line.appendChild(span); // Baseline is important for positioning text on canvas\n\n  var baseline = span.offsetTop + span.offsetHeight;\n  document.body.removeChild(line);\n  return {\n    width: width,\n    height: height,\n    baseline: baseline\n  };\n}\nexport function debounce(fn, timeout) {\n  var handle = 0;\n  var lastArgs;\n\n  var ret = function ret() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    lastArgs = args;\n    clearTimeout(handle);\n    handle = window.setTimeout(function () {\n      return fn.apply(void 0, args);\n    }, timeout);\n  };\n\n  ret.flush = function () {\n    clearTimeout(handle);\n    fn.apply(void 0, _toConsumableArray(lastArgs));\n  };\n\n  return ret;\n}\nexport function selectNode(node) {\n  var selection = window.getSelection();\n\n  if (selection) {\n    var range = document.createRange();\n    range.selectNodeContents(node);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}\nexport function removeSelection() {\n  var selection = window.getSelection();\n\n  if (selection) {\n    selection.removeAllRanges();\n  }\n}\nexport function distance(x, y) {\n  return Math.abs(x - y);\n}\nexport function distance2d(x1, y1, x2, y2) {\n  var xd = x2 - x1;\n  var yd = y2 - y1;\n  return Math.hypot(xd, yd);\n}\nexport function resetCursor() {\n  document.documentElement.style.cursor = \"\";\n}\nexport var getShortcutKey = function getShortcutKey(shortcut) {\n  var isMac = /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\n  if (isMac) {\n    return \" \\u2014 \".concat(shortcut.replace(\"CtrlOrCmd+\", \"⌘\").replace(\"Alt+\", \"⌥\").replace(\"Ctrl+\", \"⌃\").replace(\"Shift+\", \"⇧\"));\n  }\n\n  return \" \\u2014 \".concat(shortcut.replace(\"CtrlOrCmd\", \"Ctrl\"));\n};\nexport function viewportCoordsToSceneCoords(_ref, _ref2, canvas) {\n  var clientX = _ref.clientX,\n      clientY = _ref.clientY;\n  var scrollX = _ref2.scrollX,\n      scrollY = _ref2.scrollY,\n      zoom = _ref2.zoom;\n  var zoomOrigin = getZoomOrigin(canvas);\n  var clientXWithZoom = zoomOrigin.x + (clientX - zoomOrigin.x) / zoom;\n  var clientYWithZoom = zoomOrigin.y + (clientY - zoomOrigin.y) / zoom;\n  var x = clientXWithZoom - scrollX;\n  var y = clientYWithZoom - scrollY;\n  return {\n    x: x,\n    y: y\n  };\n}\nexport function sceneCoordsToViewportCoords(_ref3, _ref4, canvas) {\n  var sceneX = _ref3.sceneX,\n      sceneY = _ref3.sceneY;\n  var scrollX = _ref4.scrollX,\n      scrollY = _ref4.scrollY,\n      zoom = _ref4.zoom;\n  var zoomOrigin = getZoomOrigin(canvas);\n  var sceneXWithZoomAndScroll = zoomOrigin.x - (zoomOrigin.x - sceneX - scrollX) * zoom;\n  var sceneYWithZoomAndScroll = zoomOrigin.y - (zoomOrigin.y - sceneY - scrollY) * zoom;\n  var x = sceneXWithZoomAndScroll;\n  var y = sceneYWithZoomAndScroll;\n  return {\n    x: x,\n    y: y\n  };\n}","map":{"version":3,"sources":["/home/pro/Solutions/drawboard-light/src/utils.ts"],"names":["getZoomOrigin","SVG_NS","getDateTime","date","Date","year","getFullYear","month","getMonth","day","getDate","hr","getHours","min","getMinutes","secs","getSeconds","capitalizeString","str","charAt","toUpperCase","slice","isToolIcon","target","HTMLElement","className","includes","isInputLike","dataset","type","HTMLBRElement","HTMLInputElement","HTMLTextAreaElement","HTMLSelectElement","isWritableElement","measureText","text","font","line","document","createElement","body","style","position","whiteSpace","appendChild","innerText","width","offsetWidth","height","offsetHeight","span","display","overflow","baseline","offsetTop","removeChild","debounce","fn","timeout","handle","lastArgs","ret","args","clearTimeout","window","setTimeout","flush","selectNode","node","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","removeSelection","distance","x","y","Math","abs","distance2d","x1","y1","x2","y2","xd","yd","hypot","resetCursor","documentElement","cursor","getShortcutKey","shortcut","isMac","test","navigator","platform","replace","viewportCoordsToSceneCoords","canvas","clientX","clientY","scrollX","scrollY","zoom","zoomOrigin","clientXWithZoom","clientYWithZoom","sceneCoordsToViewportCoords","sceneX","sceneY","sceneXWithZoomAndScroll","sceneYWithZoomAndScroll"],"mappings":";AACA,SAASA,aAAT,QAA8B,SAA9B;AAEA,OAAO,IAAMC,MAAM,GAAG,4BAAf;AAEP,OAAO,SAASC,WAAT,GAAuB;AAC5B,MAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;AACA,MAAMC,IAAI,GAAGF,IAAI,CAACG,WAAL,EAAb;AACA,MAAMC,KAAK,GAAGJ,IAAI,CAACK,QAAL,KAAkB,CAAhC;AACA,MAAMC,GAAG,GAAGN,IAAI,CAACO,OAAL,EAAZ;AACA,MAAMC,EAAE,GAAGR,IAAI,CAACS,QAAL,EAAX;AACA,MAAMC,GAAG,GAAGV,IAAI,CAACW,UAAL,EAAZ;AACA,MAAMC,IAAI,GAAGZ,IAAI,CAACa,UAAL,EAAb;AAEA,mBAAUX,IAAV,SAAiBE,KAAjB,SAAyBE,GAAzB,SAA+BE,EAA/B,SAAoCE,GAApC,SAA0CE,IAA1C;AACD;AAED,OAAO,SAASE,gBAAT,CAA0BC,GAA1B,EAAuC;AAC5C,SAAOA,GAAG,CAACC,MAAJ,CAAW,CAAX,EAAcC,WAAd,KAA8BF,GAAG,CAACG,KAAJ,CAAU,CAAV,CAArC;AACD;AAED,OAAO,SAASC,UAAT,CACLC,MADK,EAEkB;AACvB,SAAOA,MAAM,YAAYC,WAAlB,IAAiCD,MAAM,CAACE,SAAP,CAAiBC,QAAjB,CAA0B,UAA1B,CAAxC;AACD;AAED,OAAO,SAASC,WAAT,CACLJ,MADK,EAOY;AACjB,SACGA,MAAM,YAAYC,WAAlB,IAAiCD,MAAM,CAACK,OAAP,CAAeC,IAAf,KAAwB,SAA1D,IACAN,MAAM,YAAYO,aADlB,IACmC;AACnCP,EAAAA,MAAM,YAAYQ,gBAFlB,IAGAR,MAAM,YAAYS,mBAHlB,IAIAT,MAAM,YAAYU,iBALpB;AAOD;AAED,OAAO,SAASC,iBAAT,CACLX,MADK,EAMY;AACjB,SACGA,MAAM,YAAYC,WAAlB,IAAiCD,MAAM,CAACK,OAAP,CAAeC,IAAf,KAAwB,SAA1D,IACAN,MAAM,YAAYO,aADlB,IACmC;AACnCP,EAAAA,MAAM,YAAYS,mBAFlB,IAGCT,MAAM,YAAYQ,gBAAlB,KACER,MAAM,CAACM,IAAP,KAAgB,MAAhB,IAA0BN,MAAM,CAACM,IAAP,KAAgB,QAD5C,CAJH;AAOD,C,CAED;;AACA,OAAO,SAASM,WAAT,CAAqBC,IAArB,EAAmCC,IAAnC,EAAiD;AACtD,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAb;AACA,MAAMC,IAAI,GAAGF,QAAQ,CAACE,IAAtB;AACAH,EAAAA,IAAI,CAACI,KAAL,CAAWC,QAAX,GAAsB,UAAtB;AACAL,EAAAA,IAAI,CAACI,KAAL,CAAWE,UAAX,GAAwB,QAAxB;AACAN,EAAAA,IAAI,CAACI,KAAL,CAAWL,IAAX,GAAkBA,IAAlB;AACAI,EAAAA,IAAI,CAACI,WAAL,CAAiBP,IAAjB,EANsD,CAOtD;;AACAA,EAAAA,IAAI,CAACQ,SAAL,GAAiBV,IAAjB;AACA,MAAMW,KAAK,GAAGT,IAAI,CAACU,WAAnB;AACA,MAAMC,MAAM,GAAGX,IAAI,CAACY,YAApB,CAVsD,CAWtD;AACA;;AACA,MAAMC,IAAI,GAAGZ,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAb;AACAW,EAAAA,IAAI,CAACT,KAAL,CAAWU,OAAX,GAAqB,cAArB;AACAD,EAAAA,IAAI,CAACT,KAAL,CAAWW,QAAX,GAAsB,QAAtB;AACAF,EAAAA,IAAI,CAACT,KAAL,CAAWK,KAAX,GAAmB,KAAnB;AACAI,EAAAA,IAAI,CAACT,KAAL,CAAWO,MAAX,GAAoB,KAApB;AACAX,EAAAA,IAAI,CAACO,WAAL,CAAiBM,IAAjB,EAlBsD,CAmBtD;;AACA,MAAMG,QAAQ,GAAGH,IAAI,CAACI,SAAL,GAAiBJ,IAAI,CAACD,YAAvC;AACAX,EAAAA,QAAQ,CAACE,IAAT,CAAce,WAAd,CAA0BlB,IAA1B;AAEA,SAAO;AAAES,IAAAA,KAAK,EAALA,KAAF;AAASE,IAAAA,MAAM,EAANA,MAAT;AAAiBK,IAAAA,QAAQ,EAARA;AAAjB,GAAP;AACD;AAED,OAAO,SAASG,QAAT,CACLC,EADK,EAELC,OAFK,EAGL;AACA,MAAIC,MAAM,GAAG,CAAb;AACA,MAAIC,QAAJ;;AACA,MAAMC,GAAG,GAAG,SAANA,GAAM,GAAgB;AAAA,sCAAZC,IAAY;AAAZA,MAAAA,IAAY;AAAA;;AAC1BF,IAAAA,QAAQ,GAAGE,IAAX;AACAC,IAAAA,YAAY,CAACJ,MAAD,CAAZ;AACAA,IAAAA,MAAM,GAAGK,MAAM,CAACC,UAAP,CAAkB;AAAA,aAAMR,EAAE,MAAF,SAAMK,IAAN,CAAN;AAAA,KAAlB,EAAqCJ,OAArC,CAAT;AACD,GAJD;;AAKAG,EAAAA,GAAG,CAACK,KAAJ,GAAY,YAAM;AAChBH,IAAAA,YAAY,CAACJ,MAAD,CAAZ;AACAF,IAAAA,EAAE,MAAF,4BAAMG,QAAN;AACD,GAHD;;AAIA,SAAOC,GAAP;AACD;AAED,OAAO,SAASM,UAAT,CAAoBC,IAApB,EAAmC;AACxC,MAAMC,SAAS,GAAGL,MAAM,CAACM,YAAP,EAAlB;;AACA,MAAID,SAAJ,EAAe;AACb,QAAME,KAAK,GAAGjC,QAAQ,CAACkC,WAAT,EAAd;AACAD,IAAAA,KAAK,CAACE,kBAAN,CAAyBL,IAAzB;AACAC,IAAAA,SAAS,CAACK,eAAV;AACAL,IAAAA,SAAS,CAACM,QAAV,CAAmBJ,KAAnB;AACD;AACF;AAED,OAAO,SAASK,eAAT,GAA2B;AAChC,MAAMP,SAAS,GAAGL,MAAM,CAACM,YAAP,EAAlB;;AACA,MAAID,SAAJ,EAAe;AACbA,IAAAA,SAAS,CAACK,eAAV;AACD;AACF;AAED,OAAO,SAASG,QAAT,CAAkBC,CAAlB,EAA6BC,CAA7B,EAAwC;AAC7C,SAAOC,IAAI,CAACC,GAAL,CAASH,CAAC,GAAGC,CAAb,CAAP;AACD;AAED,OAAO,SAASG,UAAT,CAAoBC,EAApB,EAAgCC,EAAhC,EAA4CC,EAA5C,EAAwDC,EAAxD,EAAoE;AACzE,MAAMC,EAAE,GAAGF,EAAE,GAAGF,EAAhB;AACA,MAAMK,EAAE,GAAGF,EAAE,GAAGF,EAAhB;AACA,SAAOJ,IAAI,CAACS,KAAL,CAAWF,EAAX,EAAeC,EAAf,CAAP;AACD;AAED,OAAO,SAASE,WAAT,GAAuB;AAC5BpD,EAAAA,QAAQ,CAACqD,eAAT,CAAyBlD,KAAzB,CAA+BmD,MAA/B,GAAwC,EAAxC;AACD;AAED,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,QAAD,EAA8B;AAC1D,MAAMC,KAAK,GAAG,uBAAuBC,IAAvB,CAA4BhC,MAAM,CAACiC,SAAP,CAAiBC,QAA7C,CAAd;;AACA,MAAIH,KAAJ,EAAW;AACT,6BAAaD,QAAQ,CAClBK,OADU,CACF,YADE,EACY,GADZ,EAEVA,OAFU,CAEF,MAFE,EAEM,GAFN,EAGVA,OAHU,CAGF,OAHE,EAGO,GAHP,EAIVA,OAJU,CAIF,QAJE,EAIQ,GAJR,CAAb;AAKD;;AACD,2BAAaL,QAAQ,CAACK,OAAT,CAAiB,WAAjB,EAA8B,MAA9B,CAAb;AACD,CAVM;AAWP,OAAO,SAASC,2BAAT,cAWLC,MAXK,EAYL;AAAA,MAXEC,OAWF,QAXEA,OAWF;AAAA,MAXWC,OAWX,QAXWA,OAWX;AAAA,MATEC,OASF,SATEA,OASF;AAAA,MAREC,OAQF,SAREA,OAQF;AAAA,MAPEC,IAOF,SAPEA,IAOF;AACA,MAAMC,UAAU,GAAG5G,aAAa,CAACsG,MAAD,CAAhC;AACA,MAAMO,eAAe,GAAGD,UAAU,CAAC7B,CAAX,GAAe,CAACwB,OAAO,GAAGK,UAAU,CAAC7B,CAAtB,IAA2B4B,IAAlE;AACA,MAAMG,eAAe,GAAGF,UAAU,CAAC5B,CAAX,GAAe,CAACwB,OAAO,GAAGI,UAAU,CAAC5B,CAAtB,IAA2B2B,IAAlE;AAEA,MAAM5B,CAAC,GAAG8B,eAAe,GAAGJ,OAA5B;AACA,MAAMzB,CAAC,GAAG8B,eAAe,GAAGJ,OAA5B;AAEA,SAAO;AAAE3B,IAAAA,CAAC,EAADA,CAAF;AAAKC,IAAAA,CAAC,EAADA;AAAL,GAAP;AACD;AAED,OAAO,SAAS+B,2BAAT,eAWLT,MAXK,EAYL;AAAA,MAXEU,MAWF,SAXEA,MAWF;AAAA,MAXUC,MAWV,SAXUA,MAWV;AAAA,MATER,OASF,SATEA,OASF;AAAA,MAREC,OAQF,SAREA,OAQF;AAAA,MAPEC,IAOF,SAPEA,IAOF;AACA,MAAMC,UAAU,GAAG5G,aAAa,CAACsG,MAAD,CAAhC;AACA,MAAMY,uBAAuB,GAC3BN,UAAU,CAAC7B,CAAX,GAAe,CAAC6B,UAAU,CAAC7B,CAAX,GAAeiC,MAAf,GAAwBP,OAAzB,IAAoCE,IADrD;AAEA,MAAMQ,uBAAuB,GAC3BP,UAAU,CAAC5B,CAAX,GAAe,CAAC4B,UAAU,CAAC5B,CAAX,GAAeiC,MAAf,GAAwBP,OAAzB,IAAoCC,IADrD;AAGA,MAAM5B,CAAC,GAAGmC,uBAAV;AACA,MAAMlC,CAAC,GAAGmC,uBAAV;AAEA,SAAO;AAAEpC,IAAAA,CAAC,EAADA,CAAF;AAAKC,IAAAA,CAAC,EAADA;AAAL,GAAP;AACD","sourcesContent":["import { FlooredNumber } from \"./types\";\nimport { getZoomOrigin } from \"./scene\";\n\nexport const SVG_NS = \"http://www.w3.org/2000/svg\";\n\nexport function getDateTime() {\n  const date = new Date();\n  const year = date.getFullYear();\n  const month = date.getMonth() + 1;\n  const day = date.getDate();\n  const hr = date.getHours();\n  const min = date.getMinutes();\n  const secs = date.getSeconds();\n\n  return `${year}${month}${day}${hr}${min}${secs}`;\n}\n\nexport function capitalizeString(str: string) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function isToolIcon(\n  target: Element | EventTarget | null,\n): target is HTMLElement {\n  return target instanceof HTMLElement && target.className.includes(\"ToolIcon\");\n}\n\nexport function isInputLike(\n  target: Element | EventTarget | null,\n): target is\n  | HTMLInputElement\n  | HTMLTextAreaElement\n  | HTMLSelectElement\n  | HTMLBRElement\n  | HTMLDivElement {\n  return (\n    (target instanceof HTMLElement && target.dataset.type === \"wysiwyg\") ||\n    target instanceof HTMLBRElement || // newline in wysiwyg\n    target instanceof HTMLInputElement ||\n    target instanceof HTMLTextAreaElement ||\n    target instanceof HTMLSelectElement\n  );\n}\n\nexport function isWritableElement(\n  target: Element | EventTarget | null,\n): target is\n  | HTMLInputElement\n  | HTMLTextAreaElement\n  | HTMLBRElement\n  | HTMLDivElement {\n  return (\n    (target instanceof HTMLElement && target.dataset.type === \"wysiwyg\") ||\n    target instanceof HTMLBRElement || // newline in wysiwyg\n    target instanceof HTMLTextAreaElement ||\n    (target instanceof HTMLInputElement &&\n      (target.type === \"text\" || target.type === \"number\"))\n  );\n}\n\n// https://github.com/grassator/canvas-text-editor/blob/master/lib/FontMetrics.js\nexport function measureText(text: string, font: string) {\n  const line = document.createElement(\"div\");\n  const body = document.body;\n  line.style.position = \"absolute\";\n  line.style.whiteSpace = \"nowrap\";\n  line.style.font = font;\n  body.appendChild(line);\n  // Now we can measure width and height of the letter\n  line.innerText = text;\n  const width = line.offsetWidth;\n  const height = line.offsetHeight;\n  // Now creating 1px sized item that will be aligned to baseline\n  // to calculate baseline shift\n  const span = document.createElement(\"span\");\n  span.style.display = \"inline-block\";\n  span.style.overflow = \"hidden\";\n  span.style.width = \"1px\";\n  span.style.height = \"1px\";\n  line.appendChild(span);\n  // Baseline is important for positioning text on canvas\n  const baseline = span.offsetTop + span.offsetHeight;\n  document.body.removeChild(line);\n\n  return { width, height, baseline };\n}\n\nexport function debounce<T extends any[]>(\n  fn: (...args: T) => void,\n  timeout: number,\n) {\n  let handle = 0;\n  let lastArgs: T;\n  const ret = (...args: T) => {\n    lastArgs = args;\n    clearTimeout(handle);\n    handle = window.setTimeout(() => fn(...args), timeout);\n  };\n  ret.flush = () => {\n    clearTimeout(handle);\n    fn(...lastArgs);\n  };\n  return ret;\n}\n\nexport function selectNode(node: Element) {\n  const selection = window.getSelection();\n  if (selection) {\n    const range = document.createRange();\n    range.selectNodeContents(node);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}\n\nexport function removeSelection() {\n  const selection = window.getSelection();\n  if (selection) {\n    selection.removeAllRanges();\n  }\n}\n\nexport function distance(x: number, y: number) {\n  return Math.abs(x - y);\n}\n\nexport function distance2d(x1: number, y1: number, x2: number, y2: number) {\n  const xd = x2 - x1;\n  const yd = y2 - y1;\n  return Math.hypot(xd, yd);\n}\n\nexport function resetCursor() {\n  document.documentElement.style.cursor = \"\";\n}\n\nexport const getShortcutKey = (shortcut: string): string => {\n  const isMac = /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n  if (isMac) {\n    return ` — ${shortcut\n      .replace(\"CtrlOrCmd+\", \"⌘\")\n      .replace(\"Alt+\", \"⌥\")\n      .replace(\"Ctrl+\", \"⌃\")\n      .replace(\"Shift+\", \"⇧\")}`;\n  }\n  return ` — ${shortcut.replace(\"CtrlOrCmd\", \"Ctrl\")}`;\n};\nexport function viewportCoordsToSceneCoords(\n  { clientX, clientY }: { clientX: number; clientY: number },\n  {\n    scrollX,\n    scrollY,\n    zoom,\n  }: {\n    scrollX: FlooredNumber;\n    scrollY: FlooredNumber;\n    zoom: number;\n  },\n  canvas: HTMLCanvasElement | null,\n) {\n  const zoomOrigin = getZoomOrigin(canvas);\n  const clientXWithZoom = zoomOrigin.x + (clientX - zoomOrigin.x) / zoom;\n  const clientYWithZoom = zoomOrigin.y + (clientY - zoomOrigin.y) / zoom;\n\n  const x = clientXWithZoom - scrollX;\n  const y = clientYWithZoom - scrollY;\n\n  return { x, y };\n}\n\nexport function sceneCoordsToViewportCoords(\n  { sceneX, sceneY }: { sceneX: number; sceneY: number },\n  {\n    scrollX,\n    scrollY,\n    zoom,\n  }: {\n    scrollX: FlooredNumber;\n    scrollY: FlooredNumber;\n    zoom: number;\n  },\n  canvas: HTMLCanvasElement | null,\n) {\n  const zoomOrigin = getZoomOrigin(canvas);\n  const sceneXWithZoomAndScroll =\n    zoomOrigin.x - (zoomOrigin.x - sceneX - scrollX) * zoom;\n  const sceneYWithZoomAndScroll =\n    zoomOrigin.y - (zoomOrigin.y - sceneY - scrollY) * zoom;\n\n  const x = sceneXWithZoomAndScroll;\n  const y = sceneYWithZoomAndScroll;\n\n  return { x, y };\n}\n"]},"metadata":{},"sourceType":"module"}