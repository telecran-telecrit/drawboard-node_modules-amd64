{"ast":null,"code":"import oc from \"open-color\";\nimport { getDateTime } from \"./utils\";\nimport { t } from \"./i18n\";\nexport const DEFAULT_FONT = \"20px Virgil\";\nexport const DEFAULT_TEXT_ALIGN = \"left\";\nexport function getDefaultAppState() {\n  return {\n    wysiwygElement: null,\n    isLoading: false,\n    errorMessage: null,\n    draggingElement: null,\n    resizingElement: null,\n    multiElement: null,\n    editingElement: null,\n    elementType: \"selection\",\n    elementLocked: false,\n    exportBackground: true,\n    currentItemStrokeColor: oc.black,\n    currentItemBackgroundColor: \"transparent\",\n    currentItemFillStyle: \"hachure\",\n    currentItemStrokeWidth: 1,\n    currentItemRoughness: 1,\n    currentItemOpacity: 100,\n    currentItemFont: DEFAULT_FONT,\n    currentItemTextAlign: DEFAULT_TEXT_ALIGN,\n    viewBackgroundColor: oc.white,\n    scrollX: 0,\n    scrollY: 0,\n    cursorX: 0,\n    cursorY: 0,\n    cursorButton: \"up\",\n    scrolledOutside: false,\n    name: `${t(\"labels.untitled\")}-${getDateTime()}`,\n    username: \"\",\n    isCollaborating: false,\n    isResizing: false,\n    isRotating: false,\n    selectionElement: null,\n    zoom: 1,\n    openMenu: null,\n    lastPointerDownWith: \"mouse\",\n    selectedElementIds: {},\n    collaborators: new Map(),\n    shouldCacheIgnoreZoom: false,\n    showShortcutsDialog: false\n  };\n}\nexport function clearAppStateForLocalStorage(appState) {\n  const {\n    draggingElement,\n    resizingElement,\n    multiElement,\n    editingElement,\n    selectionElement,\n    isResizing,\n    isRotating,\n    collaborators,\n    isCollaborating,\n    isLoading,\n    errorMessage,\n    showShortcutsDialog,\n    ...exportedState\n  } = appState;\n  return exportedState;\n}\nexport function clearAppStatePropertiesForHistory(appState) {\n  return {\n    selectedElementIds: appState.selectedElementIds,\n    exportBackground: appState.exportBackground,\n    currentItemStrokeColor: appState.currentItemStrokeColor,\n    currentItemBackgroundColor: appState.currentItemBackgroundColor,\n    currentItemFillStyle: appState.currentItemFillStyle,\n    currentItemStrokeWidth: appState.currentItemStrokeWidth,\n    currentItemRoughness: appState.currentItemRoughness,\n    currentItemOpacity: appState.currentItemOpacity,\n    currentItemFont: appState.currentItemFont,\n    currentItemTextAlign: appState.currentItemTextAlign,\n    viewBackgroundColor: appState.viewBackgroundColor,\n    name: appState.name\n  };\n}\nexport function cleanAppStateForExport(appState) {\n  return {\n    viewBackgroundColor: appState.viewBackgroundColor\n  };\n}","map":{"version":3,"sources":["/home/pro/Solutions/drawboard-light/src/appState.ts"],"names":["oc","getDateTime","t","DEFAULT_FONT","DEFAULT_TEXT_ALIGN","getDefaultAppState","wysiwygElement","isLoading","errorMessage","draggingElement","resizingElement","multiElement","editingElement","elementType","elementLocked","exportBackground","currentItemStrokeColor","black","currentItemBackgroundColor","currentItemFillStyle","currentItemStrokeWidth","currentItemRoughness","currentItemOpacity","currentItemFont","currentItemTextAlign","viewBackgroundColor","white","scrollX","scrollY","cursorX","cursorY","cursorButton","scrolledOutside","name","username","isCollaborating","isResizing","isRotating","selectionElement","zoom","openMenu","lastPointerDownWith","selectedElementIds","collaborators","Map","shouldCacheIgnoreZoom","showShortcutsDialog","clearAppStateForLocalStorage","appState","exportedState","clearAppStatePropertiesForHistory","cleanAppStateForExport"],"mappings":"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","sourcesContent":["import oc from \"open-color\";\nimport { AppState, FlooredNumber } from \"./types\";\nimport { getDateTime } from \"./utils\";\nimport { t } from \"./i18n\";\n\nexport const DEFAULT_FONT = \"20px Virgil\";\nexport const DEFAULT_TEXT_ALIGN = \"left\";\n\nexport function getDefaultAppState(): AppState {\n  return {\n    wysiwygElement: null,\n    isLoading: false,\n    errorMessage: null,\n    draggingElement: null,\n    resizingElement: null,\n    multiElement: null,\n    editingElement: null,\n    elementType: \"selection\",\n    elementLocked: false,\n    exportBackground: true,\n    currentItemStrokeColor: oc.black,\n    currentItemBackgroundColor: \"transparent\",\n    currentItemFillStyle: \"hachure\",\n    currentItemStrokeWidth: 1,\n    currentItemRoughness: 1,\n    currentItemOpacity: 100,\n    currentItemFont: DEFAULT_FONT,\n    currentItemTextAlign: DEFAULT_TEXT_ALIGN,\n    viewBackgroundColor: oc.white,\n    scrollX: 0 as FlooredNumber,\n    scrollY: 0 as FlooredNumber,\n    cursorX: 0,\n    cursorY: 0,\n    cursorButton: \"up\",\n    scrolledOutside: false,\n    name: `${t(\"labels.untitled\")}-${getDateTime()}`,\n    username: \"\",\n    isCollaborating: false,\n    isResizing: false,\n    isRotating: false,\n    selectionElement: null,\n    zoom: 1,\n    openMenu: null,\n    lastPointerDownWith: \"mouse\",\n    selectedElementIds: {},\n    collaborators: new Map(),\n    shouldCacheIgnoreZoom: false,\n    showShortcutsDialog: false,\n  };\n}\n\nexport function clearAppStateForLocalStorage(appState: AppState) {\n  const {\n    draggingElement,\n    resizingElement,\n    multiElement,\n    editingElement,\n    selectionElement,\n    isResizing,\n    isRotating,\n    collaborators,\n    isCollaborating,\n    isLoading,\n    errorMessage,\n    showShortcutsDialog,\n    ...exportedState\n  } = appState;\n  return exportedState;\n}\n\nexport function clearAppStatePropertiesForHistory(\n  appState: AppState,\n): Partial<AppState> {\n  return {\n    selectedElementIds: appState.selectedElementIds,\n    exportBackground: appState.exportBackground,\n    currentItemStrokeColor: appState.currentItemStrokeColor,\n    currentItemBackgroundColor: appState.currentItemBackgroundColor,\n    currentItemFillStyle: appState.currentItemFillStyle,\n    currentItemStrokeWidth: appState.currentItemStrokeWidth,\n    currentItemRoughness: appState.currentItemRoughness,\n    currentItemOpacity: appState.currentItemOpacity,\n    currentItemFont: appState.currentItemFont,\n    currentItemTextAlign: appState.currentItemTextAlign,\n    viewBackgroundColor: appState.viewBackgroundColor,\n    name: appState.name,\n  };\n}\n\nexport function cleanAppStateForExport(appState: AppState) {\n  return {\n    viewBackgroundColor: appState.viewBackgroundColor,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}