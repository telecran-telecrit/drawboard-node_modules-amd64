{"ast":null,"code":"var _jsxFileName = \"/home/pro/Solutions/drawboard-light/src/components/Modal.tsx\";\nimport \"./Modal.scss\";\nimport React, { useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { KEYS } from \"../keys\";\nexport function Modal(props) {\n  var _props$className;\n\n  const modalRoot = useBodyRoot();\n\n  const handleKeydown = event => {\n    if (event.key === KEYS.ESCAPE) {\n      event.nativeEvent.stopImmediatePropagation();\n      props.onCloseRequest();\n    }\n  };\n\n  return createPortal( /*#__PURE__*/React.createElement(\"div\", {\n    className: `Modal ${(_props$className = props.className) !== null && _props$className !== void 0 ? _props$className : \"\"}`,\n    role: \"dialog\",\n    \"aria-modal\": \"true\",\n    onKeyDown: handleKeydown,\n    \"aria-labelledby\": props.labelledBy,\n    tabIndex: -1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Modal__background\",\n    onClick: props.onCloseRequest,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Modal__content\",\n    style: {\n      \"--max-width\": `${props.maxWidth}px`,\n      maxHeight: \"100%\",\n      overflowY: \"scroll\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, props.children)), modalRoot);\n}\n\nfunction useBodyRoot() {\n  function createDiv() {\n    const div = document.createElement(\"div\");\n    document.body.appendChild(div);\n    return div;\n  }\n\n  const [div] = useState(createDiv);\n  useEffect(() => {\n    return () => {\n      document.body.removeChild(div);\n    };\n  }, [div]);\n  return div;\n}","map":{"version":3,"sources":["/home/pro/Solutions/drawboard-light/src/components/Modal.tsx"],"names":["React","useEffect","useState","createPortal","KEYS","Modal","props","modalRoot","useBodyRoot","handleKeydown","event","key","ESCAPE","nativeEvent","stopImmediatePropagation","onCloseRequest","className","labelledBy","maxWidth","maxHeight","overflowY","children","createDiv","div","document","createElement","body","appendChild","removeChild"],"mappings":";AAAA,OAAO,cAAP;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,YAAT,QAA6B,WAA7B;AACA,SAASC,IAAT,QAAqB,SAArB;AAEA,OAAO,SAASC,KAAT,CAAeC,KAAf,EAMJ;AAAA;;AACD,QAAMC,SAAS,GAAGC,WAAW,EAA7B;;AAEA,QAAMC,aAAa,GAAIC,KAAD,IAAgC;AACpD,QAAIA,KAAK,CAACC,GAAN,KAAcP,IAAI,CAACQ,MAAvB,EAA+B;AAC7BF,MAAAA,KAAK,CAACG,WAAN,CAAkBC,wBAAlB;AACAR,MAAAA,KAAK,CAACS,cAAN;AACD;AACF,GALD;;AAMA,SAAOZ,YAAY,eACjB;AACE,IAAA,SAAS,EAAG,SAAD,oBAASG,KAAK,CAACU,SAAf,+DAA4B,EAAG,EAD5C;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,kBAAW,MAHb;AAIE,IAAA,SAAS,EAAEP,aAJb;AAKE,uBAAiBH,KAAK,CAACW,UALzB;AAME,IAAA,QAAQ,EAAE,CAAC,CANb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAQE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAmC,IAAA,OAAO,EAAEX,KAAK,CAACS,cAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,eASE;AACE,IAAA,SAAS,EAAC,gBADZ;AAEE,IAAA,KAAK,EACH;AACE,qBAAgB,GAAET,KAAK,CAACY,QAAS,IADnC;AAEEC,MAAAA,SAAS,EAAE,MAFb;AAGEC,MAAAA,SAAS,EAAE;AAHb,KAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAUGd,KAAK,CAACe,QAVT,CATF,CADiB,EAuBjBd,SAvBiB,CAAnB;AAyBD;;AAED,SAASC,WAAT,GAAuB;AACrB,WAASc,SAAT,GAAqB;AACnB,UAAMC,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;AACAD,IAAAA,QAAQ,CAACE,IAAT,CAAcC,WAAd,CAA0BJ,GAA1B;AACA,WAAOA,GAAP;AACD;;AACD,QAAM,CAACA,GAAD,IAAQrB,QAAQ,CAACoB,SAAD,CAAtB;AACArB,EAAAA,SAAS,CAAC,MAAM;AACd,WAAO,MAAM;AACXuB,MAAAA,QAAQ,CAACE,IAAT,CAAcE,WAAd,CAA0BL,GAA1B;AACD,KAFD;AAGD,GAJQ,EAIN,CAACA,GAAD,CAJM,CAAT;AAKA,SAAOA,GAAP;AACD","sourcesContent":["import \"./Modal.scss\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { KEYS } from \"../keys\";\n\nexport function Modal(props: {\n  className?: string;\n  children: React.ReactNode;\n  maxWidth?: number;\n  onCloseRequest(): void;\n  labelledBy: string;\n}) {\n  const modalRoot = useBodyRoot();\n\n  const handleKeydown = (event: React.KeyboardEvent) => {\n    if (event.key === KEYS.ESCAPE) {\n      event.nativeEvent.stopImmediatePropagation();\n      props.onCloseRequest();\n    }\n  };\n  return createPortal(\n    <div\n      className={`Modal ${props.className ?? \"\"}`}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      onKeyDown={handleKeydown}\n      aria-labelledby={props.labelledBy}\n      tabIndex={-1}\n    >\n      <div className=\"Modal__background\" onClick={props.onCloseRequest}></div>\n      <div\n        className=\"Modal__content\"\n        style={\n          {\n            \"--max-width\": `${props.maxWidth}px`,\n            maxHeight: \"100%\",\n            overflowY: \"scroll\",\n          } as any\n        }\n      >\n        {props.children}\n      </div>\n    </div>,\n    modalRoot,\n  );\n}\n\nfunction useBodyRoot() {\n  function createDiv() {\n    const div = document.createElement(\"div\");\n    document.body.appendChild(div);\n    return div;\n  }\n  const [div] = useState(createDiv);\n  useEffect(() => {\n    return () => {\n      document.body.removeChild(div);\n    };\n  }, [div]);\n  return div;\n}\n"]},"metadata":{},"sourceType":"module"}