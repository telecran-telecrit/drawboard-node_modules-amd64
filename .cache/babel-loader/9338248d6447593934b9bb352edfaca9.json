{"ast":null,"code":"import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\n\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nvar cookie = {\n  create: function create(name, value, minutes, domain) {\n    var expires;\n\n    if (minutes) {\n      var date = new Date();\n      date.setTime(date.getTime() + minutes * 60 * 1000);\n      expires = '; expires=' + date.toGMTString();\n    } else expires = '';\n\n    domain = domain ? 'domain=' + domain + ';' : '';\n    document.cookie = name + '=' + value + expires + ';' + domain + 'path=/';\n  },\n  read: function read(name) {\n    var nameEQ = name + '=';\n    var ca = document.cookie.split(';');\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n\n      while (c.charAt(0) === ' ') {\n        c = c.substring(1, c.length);\n      }\n\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n\n    return null;\n  },\n  remove: function remove(name) {\n    this.create(name, '', -1);\n  }\n};\nvar cookie$1 = {\n  name: 'cookie',\n  lookup: function lookup(options) {\n    var found;\n\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      var c = cookie.read(options.lookupCookie);\n      if (c) found = c;\n    }\n\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      cookie.create(options.lookupCookie, lng, options.cookieMinutes, options.cookieDomain);\n    }\n  }\n};\nvar querystring = {\n  name: 'querystring',\n  lookup: function lookup(options) {\n    var found;\n\n    if (typeof window !== 'undefined') {\n      var query = window.location.search.substring(1);\n      var params = query.split('&');\n\n      for (var i = 0; i < params.length; i++) {\n        var pos = params[i].indexOf('=');\n\n        if (pos > 0) {\n          var key = params[i].substring(0, pos);\n\n          if (key === options.lookupQuerystring) {\n            found = params[i].substring(pos + 1);\n          }\n        }\n      }\n    }\n\n    return found;\n  }\n};\nvar hasLocalStorageSupport;\n\ntry {\n  hasLocalStorageSupport = window !== 'undefined' && window.localStorage !== null;\n  var testKey = 'i18next.translate.boo';\n  window.localStorage.setItem(testKey, 'foo');\n  window.localStorage.removeItem(testKey);\n} catch (e) {\n  hasLocalStorageSupport = false;\n}\n\nvar localStorage = {\n  name: 'localStorage',\n  lookup: function lookup(options) {\n    var found;\n\n    if (options.lookupLocalStorage && hasLocalStorageSupport) {\n      var lng = window.localStorage.getItem(options.lookupLocalStorage);\n      if (lng) found = lng;\n    }\n\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupLocalStorage && hasLocalStorageSupport) {\n      window.localStorage.setItem(options.lookupLocalStorage, lng);\n    }\n  }\n};\nvar navigator$1 = {\n  name: 'navigator',\n  lookup: function lookup(options) {\n    var found = [];\n\n    if (typeof navigator !== 'undefined') {\n      if (navigator.languages) {\n        // chrome only; not an array, so can't use .push.apply instead of iterating\n        for (var i = 0; i < navigator.languages.length; i++) {\n          found.push(navigator.languages[i]);\n        }\n      }\n\n      if (navigator.userLanguage) {\n        found.push(navigator.userLanguage);\n      }\n\n      if (navigator.language) {\n        found.push(navigator.language);\n      }\n    }\n\n    return found.length > 0 ? found : undefined;\n  }\n};\nvar htmlTag = {\n  name: 'htmlTag',\n  lookup: function lookup(options) {\n    var found;\n    var htmlTag = options.htmlTag || (typeof document !== 'undefined' ? document.documentElement : null);\n\n    if (htmlTag && typeof htmlTag.getAttribute === 'function') {\n      found = htmlTag.getAttribute('lang');\n    }\n\n    return found;\n  }\n};\nvar path = {\n  name: 'path',\n  lookup: function lookup(options) {\n    var found;\n\n    if (typeof window !== 'undefined') {\n      var language = window.location.pathname.match(/\\/([a-zA-Z-]*)/g);\n\n      if (language instanceof Array) {\n        if (typeof options.lookupFromPathIndex === 'number') {\n          if (typeof language[options.lookupFromPathIndex] !== 'string') {\n            return undefined;\n          }\n\n          found = language[options.lookupFromPathIndex].replace('/', '');\n        } else {\n          found = language[0].replace('/', '');\n        }\n      }\n    }\n\n    return found;\n  }\n};\nvar subdomain = {\n  name: 'subdomain',\n  lookup: function lookup(options) {\n    var found;\n\n    if (typeof window !== 'undefined') {\n      var language = window.location.href.match(/(?:http[s]*\\:\\/\\/)*(.*?)\\.(?=[^\\/]*\\..{2,5})/gi);\n\n      if (language instanceof Array) {\n        if (typeof options.lookupFromSubdomainIndex === 'number') {\n          found = language[options.lookupFromSubdomainIndex].replace('http://', '').replace('https://', '').replace('.', '');\n        } else {\n          found = language[0].replace('http://', '').replace('https://', '').replace('.', '');\n        }\n      }\n    }\n\n    return found;\n  }\n};\n\nfunction getDefaults() {\n  return {\n    order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag'],\n    lookupQuerystring: 'lng',\n    lookupCookie: 'i18next',\n    lookupLocalStorage: 'i18nextLng',\n    // cache user language\n    caches: ['localStorage'],\n    excludeCacheFor: ['cimode'],\n    //cookieMinutes: 10,\n    //cookieDomain: 'myDomain'\n    checkWhitelist: true\n  };\n}\n\nvar Browser = /*#__PURE__*/function () {\n  function Browser(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Browser);\n\n    this.type = 'languageDetector';\n    this.detectors = {};\n    this.init(services, options);\n  }\n\n  _createClass(Browser, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var i18nOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults()); // backwards compatibility\n\n      if (this.options.lookupFromUrlIndex) this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex;\n      this.i18nOptions = i18nOptions;\n      this.addDetector(cookie$1);\n      this.addDetector(querystring);\n      this.addDetector(localStorage);\n      this.addDetector(navigator$1);\n      this.addDetector(htmlTag);\n      this.addDetector(path);\n      this.addDetector(subdomain);\n    }\n  }, {\n    key: \"addDetector\",\n    value: function addDetector(detector) {\n      this.detectors[detector.name] = detector;\n    }\n  }, {\n    key: \"detect\",\n    value: function detect(detectionOrder) {\n      var _this = this;\n\n      if (!detectionOrder) detectionOrder = this.options.order;\n      var detected = [];\n      detectionOrder.forEach(function (detectorName) {\n        if (_this.detectors[detectorName]) {\n          var lookup = _this.detectors[detectorName].lookup(_this.options);\n\n          if (lookup && typeof lookup === 'string') lookup = [lookup];\n          if (lookup) detected = detected.concat(lookup);\n        }\n      });\n      var found;\n      detected.forEach(function (lng) {\n        if (found) return;\n\n        var cleanedLng = _this.services.languageUtils.formatLanguageCode(lng);\n\n        if (!_this.options.checkWhitelist || _this.services.languageUtils.isWhitelisted(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found) {\n        var fallbacks = this.i18nOptions.fallbackLng;\n        if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n        if (!fallbacks) fallbacks = [];\n\n        if (Object.prototype.toString.apply(fallbacks) === '[object Array]') {\n          found = fallbacks[0];\n        } else {\n          found = fallbacks[0] || fallbacks[\"default\"] && fallbacks[\"default\"][0];\n        }\n      }\n\n      return found;\n    }\n  }, {\n    key: \"cacheUserLanguage\",\n    value: function cacheUserLanguage(lng, caches) {\n      var _this2 = this;\n\n      if (!caches) caches = this.options.caches;\n      if (!caches) return;\n      if (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(lng) > -1) return;\n      caches.forEach(function (cacheName) {\n        if (_this2.detectors[cacheName]) _this2.detectors[cacheName].cacheUserLanguage(lng, _this2.options);\n      });\n    }\n  }]);\n\n  return Browser;\n}();\n\nBrowser.type = 'languageDetector';\nexport default Browser;","map":{"version":3,"sources":["/home/pro/Solutions/drawboard-light/node_modules/i18next-browser-languagedetector/dist/esm/i18nextBrowserLanguageDetector.js"],"names":["_classCallCheck","_createClass","arr","each","forEach","slice","defaults","obj","call","arguments","source","prop","undefined","cookie","create","name","value","minutes","domain","expires","date","Date","setTime","getTime","toGMTString","document","read","nameEQ","ca","split","i","length","c","charAt","substring","indexOf","remove","cookie$1","lookup","options","found","lookupCookie","cacheUserLanguage","lng","cookieMinutes","cookieDomain","querystring","window","query","location","search","params","pos","key","lookupQuerystring","hasLocalStorageSupport","localStorage","testKey","setItem","removeItem","e","lookupLocalStorage","getItem","navigator$1","navigator","languages","push","userLanguage","language","htmlTag","documentElement","getAttribute","path","pathname","match","Array","lookupFromPathIndex","replace","subdomain","href","lookupFromSubdomainIndex","getDefaults","order","caches","excludeCacheFor","checkWhitelist","Browser","services","type","detectors","init","i18nOptions","lookupFromUrlIndex","addDetector","detector","detect","detectionOrder","_this","detected","detectorName","concat","cleanedLng","languageUtils","formatLanguageCode","isWhitelisted","fallbacks","fallbackLng","Object","prototype","toString","apply","_this2","cacheName"],"mappings":"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","sourcesContent":["import _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\n\nvar arr = [];\nvar each = arr.forEach;\nvar slice = arr.slice;\nfunction defaults(obj) {\n  each.call(slice.call(arguments, 1), function (source) {\n    if (source) {\n      for (var prop in source) {\n        if (obj[prop] === undefined) obj[prop] = source[prop];\n      }\n    }\n  });\n  return obj;\n}\n\nvar cookie = {\n  create: function create(name, value, minutes, domain) {\n    var expires;\n\n    if (minutes) {\n      var date = new Date();\n      date.setTime(date.getTime() + minutes * 60 * 1000);\n      expires = '; expires=' + date.toGMTString();\n    } else expires = '';\n\n    domain = domain ? 'domain=' + domain + ';' : '';\n    document.cookie = name + '=' + value + expires + ';' + domain + 'path=/';\n  },\n  read: function read(name) {\n    var nameEQ = name + '=';\n    var ca = document.cookie.split(';');\n\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n\n      while (c.charAt(0) === ' ') {\n        c = c.substring(1, c.length);\n      }\n\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n\n    return null;\n  },\n  remove: function remove(name) {\n    this.create(name, '', -1);\n  }\n};\nvar cookie$1 = {\n  name: 'cookie',\n  lookup: function lookup(options) {\n    var found;\n\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      var c = cookie.read(options.lookupCookie);\n      if (c) found = c;\n    }\n\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupCookie && typeof document !== 'undefined') {\n      cookie.create(options.lookupCookie, lng, options.cookieMinutes, options.cookieDomain);\n    }\n  }\n};\n\nvar querystring = {\n  name: 'querystring',\n  lookup: function lookup(options) {\n    var found;\n\n    if (typeof window !== 'undefined') {\n      var query = window.location.search.substring(1);\n      var params = query.split('&');\n\n      for (var i = 0; i < params.length; i++) {\n        var pos = params[i].indexOf('=');\n\n        if (pos > 0) {\n          var key = params[i].substring(0, pos);\n\n          if (key === options.lookupQuerystring) {\n            found = params[i].substring(pos + 1);\n          }\n        }\n      }\n    }\n\n    return found;\n  }\n};\n\nvar hasLocalStorageSupport;\n\ntry {\n  hasLocalStorageSupport = window !== 'undefined' && window.localStorage !== null;\n  var testKey = 'i18next.translate.boo';\n  window.localStorage.setItem(testKey, 'foo');\n  window.localStorage.removeItem(testKey);\n} catch (e) {\n  hasLocalStorageSupport = false;\n}\n\nvar localStorage = {\n  name: 'localStorage',\n  lookup: function lookup(options) {\n    var found;\n\n    if (options.lookupLocalStorage && hasLocalStorageSupport) {\n      var lng = window.localStorage.getItem(options.lookupLocalStorage);\n      if (lng) found = lng;\n    }\n\n    return found;\n  },\n  cacheUserLanguage: function cacheUserLanguage(lng, options) {\n    if (options.lookupLocalStorage && hasLocalStorageSupport) {\n      window.localStorage.setItem(options.lookupLocalStorage, lng);\n    }\n  }\n};\n\nvar navigator$1 = {\n  name: 'navigator',\n  lookup: function lookup(options) {\n    var found = [];\n\n    if (typeof navigator !== 'undefined') {\n      if (navigator.languages) {\n        // chrome only; not an array, so can't use .push.apply instead of iterating\n        for (var i = 0; i < navigator.languages.length; i++) {\n          found.push(navigator.languages[i]);\n        }\n      }\n\n      if (navigator.userLanguage) {\n        found.push(navigator.userLanguage);\n      }\n\n      if (navigator.language) {\n        found.push(navigator.language);\n      }\n    }\n\n    return found.length > 0 ? found : undefined;\n  }\n};\n\nvar htmlTag = {\n  name: 'htmlTag',\n  lookup: function lookup(options) {\n    var found;\n    var htmlTag = options.htmlTag || (typeof document !== 'undefined' ? document.documentElement : null);\n\n    if (htmlTag && typeof htmlTag.getAttribute === 'function') {\n      found = htmlTag.getAttribute('lang');\n    }\n\n    return found;\n  }\n};\n\nvar path = {\n  name: 'path',\n  lookup: function lookup(options) {\n    var found;\n\n    if (typeof window !== 'undefined') {\n      var language = window.location.pathname.match(/\\/([a-zA-Z-]*)/g);\n\n      if (language instanceof Array) {\n        if (typeof options.lookupFromPathIndex === 'number') {\n          if (typeof language[options.lookupFromPathIndex] !== 'string') {\n            return undefined;\n          }\n\n          found = language[options.lookupFromPathIndex].replace('/', '');\n        } else {\n          found = language[0].replace('/', '');\n        }\n      }\n    }\n\n    return found;\n  }\n};\n\nvar subdomain = {\n  name: 'subdomain',\n  lookup: function lookup(options) {\n    var found;\n\n    if (typeof window !== 'undefined') {\n      var language = window.location.href.match(/(?:http[s]*\\:\\/\\/)*(.*?)\\.(?=[^\\/]*\\..{2,5})/gi);\n\n      if (language instanceof Array) {\n        if (typeof options.lookupFromSubdomainIndex === 'number') {\n          found = language[options.lookupFromSubdomainIndex].replace('http://', '').replace('https://', '').replace('.', '');\n        } else {\n          found = language[0].replace('http://', '').replace('https://', '').replace('.', '');\n        }\n      }\n    }\n\n    return found;\n  }\n};\n\nfunction getDefaults() {\n  return {\n    order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag'],\n    lookupQuerystring: 'lng',\n    lookupCookie: 'i18next',\n    lookupLocalStorage: 'i18nextLng',\n    // cache user language\n    caches: ['localStorage'],\n    excludeCacheFor: ['cimode'],\n    //cookieMinutes: 10,\n    //cookieDomain: 'myDomain'\n    checkWhitelist: true\n  };\n}\n\nvar Browser =\n/*#__PURE__*/\nfunction () {\n  function Browser(services) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, Browser);\n\n    this.type = 'languageDetector';\n    this.detectors = {};\n    this.init(services, options);\n  }\n\n  _createClass(Browser, [{\n    key: \"init\",\n    value: function init(services) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var i18nOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.services = services;\n      this.options = defaults(options, this.options || {}, getDefaults()); // backwards compatibility\n\n      if (this.options.lookupFromUrlIndex) this.options.lookupFromPathIndex = this.options.lookupFromUrlIndex;\n      this.i18nOptions = i18nOptions;\n      this.addDetector(cookie$1);\n      this.addDetector(querystring);\n      this.addDetector(localStorage);\n      this.addDetector(navigator$1);\n      this.addDetector(htmlTag);\n      this.addDetector(path);\n      this.addDetector(subdomain);\n    }\n  }, {\n    key: \"addDetector\",\n    value: function addDetector(detector) {\n      this.detectors[detector.name] = detector;\n    }\n  }, {\n    key: \"detect\",\n    value: function detect(detectionOrder) {\n      var _this = this;\n\n      if (!detectionOrder) detectionOrder = this.options.order;\n      var detected = [];\n      detectionOrder.forEach(function (detectorName) {\n        if (_this.detectors[detectorName]) {\n          var lookup = _this.detectors[detectorName].lookup(_this.options);\n\n          if (lookup && typeof lookup === 'string') lookup = [lookup];\n          if (lookup) detected = detected.concat(lookup);\n        }\n      });\n      var found;\n      detected.forEach(function (lng) {\n        if (found) return;\n\n        var cleanedLng = _this.services.languageUtils.formatLanguageCode(lng);\n\n        if (!_this.options.checkWhitelist || _this.services.languageUtils.isWhitelisted(cleanedLng)) found = cleanedLng;\n      });\n\n      if (!found) {\n        var fallbacks = this.i18nOptions.fallbackLng;\n        if (typeof fallbacks === 'string') fallbacks = [fallbacks];\n        if (!fallbacks) fallbacks = [];\n\n        if (Object.prototype.toString.apply(fallbacks) === '[object Array]') {\n          found = fallbacks[0];\n        } else {\n          found = fallbacks[0] || fallbacks[\"default\"] && fallbacks[\"default\"][0];\n        }\n      }\n\n      return found;\n    }\n  }, {\n    key: \"cacheUserLanguage\",\n    value: function cacheUserLanguage(lng, caches) {\n      var _this2 = this;\n\n      if (!caches) caches = this.options.caches;\n      if (!caches) return;\n      if (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(lng) > -1) return;\n      caches.forEach(function (cacheName) {\n        if (_this2.detectors[cacheName]) _this2.detectors[cacheName].cacheUserLanguage(lng, _this2.options);\n      });\n    }\n  }]);\n\n  return Browser;\n}();\n\nBrowser.type = 'languageDetector';\n\nexport default Browser;\n"]},"metadata":{},"sourceType":"module"}