{"ast":null,"code":"export function getZoomOrigin(canvas) {\n  if (canvas === null) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var context = canvas.getContext(\"2d\");\n\n  if (context === null) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var normalizedCanvasWidth = canvas.width / context.getTransform().a;\n  var normalizedCanvasHeight = canvas.height / context.getTransform().d;\n  return {\n    x: normalizedCanvasWidth / 2,\n    y: normalizedCanvasHeight / 2\n  };\n}\nexport function getZoomTranslation(canvas, zoom) {\n  var diffMiddleOfTheCanvas = {\n    x: canvas.width / 2 * (zoom - 1),\n    y: canvas.height / 2 * (zoom - 1)\n  }; // Due to JavaScript float precision, we fix to fix decimals count to have symmetric zoom\n\n  return {\n    x: parseFloat(diffMiddleOfTheCanvas.x.toFixed(8)),\n    y: parseFloat(diffMiddleOfTheCanvas.y.toFixed(8))\n  };\n}\nexport function getNormalizedZoom(zoom) {\n  var normalizedZoom = parseFloat(zoom.toFixed(2));\n  var clampedZoom = Math.max(0.1, Math.min(normalizedZoom, 2));\n  return clampedZoom;\n}","map":{"version":3,"sources":["/home/pro/Solutions/drawboard-light/src/scene/zoom.ts"],"names":["getZoomOrigin","canvas","x","y","context","getContext","normalizedCanvasWidth","width","getTransform","a","normalizedCanvasHeight","height","d","getZoomTranslation","zoom","diffMiddleOfTheCanvas","parseFloat","toFixed","getNormalizedZoom","normalizedZoom","clampedZoom","Math","max","min"],"mappings":"AAAA,OAAO,SAASA,aAAT,CAAuBC,MAAvB,EAAyD;AAC9D,MAAIA,MAAM,KAAK,IAAf,EAAqB;AACnB,WAAO;AAAEC,MAAAA,CAAC,EAAE,CAAL;AAAQC,MAAAA,CAAC,EAAE;AAAX,KAAP;AACD;;AACD,MAAMC,OAAO,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAhB;;AACA,MAAID,OAAO,KAAK,IAAhB,EAAsB;AACpB,WAAO;AAAEF,MAAAA,CAAC,EAAE,CAAL;AAAQC,MAAAA,CAAC,EAAE;AAAX,KAAP;AACD;;AAED,MAAMG,qBAAqB,GAAGL,MAAM,CAACM,KAAP,GAAeH,OAAO,CAACI,YAAR,GAAuBC,CAApE;AACA,MAAMC,sBAAsB,GAAGT,MAAM,CAACU,MAAP,GAAgBP,OAAO,CAACI,YAAR,GAAuBI,CAAtE;AAEA,SAAO;AACLV,IAAAA,CAAC,EAAEI,qBAAqB,GAAG,CADtB;AAELH,IAAAA,CAAC,EAAEO,sBAAsB,GAAG;AAFvB,GAAP;AAID;AAED,OAAO,SAASG,kBAAT,CAA4BZ,MAA5B,EAAuDa,IAAvD,EAAqE;AAC1E,MAAMC,qBAAqB,GAAG;AAC5Bb,IAAAA,CAAC,EAAGD,MAAM,CAACM,KAAP,GAAe,CAAhB,IAAsBO,IAAI,GAAG,CAA7B,CADyB;AAE5BX,IAAAA,CAAC,EAAGF,MAAM,CAACU,MAAP,GAAgB,CAAjB,IAAuBG,IAAI,GAAG,CAA9B;AAFyB,GAA9B,CAD0E,CAM1E;;AACA,SAAO;AACLZ,IAAAA,CAAC,EAAEc,UAAU,CAACD,qBAAqB,CAACb,CAAtB,CAAwBe,OAAxB,CAAgC,CAAhC,CAAD,CADR;AAELd,IAAAA,CAAC,EAAEa,UAAU,CAACD,qBAAqB,CAACZ,CAAtB,CAAwBc,OAAxB,CAAgC,CAAhC,CAAD;AAFR,GAAP;AAID;AAED,OAAO,SAASC,iBAAT,CAA2BJ,IAA3B,EAAiD;AACtD,MAAMK,cAAc,GAAGH,UAAU,CAACF,IAAI,CAACG,OAAL,CAAa,CAAb,CAAD,CAAjC;AACA,MAAMG,WAAW,GAAGC,IAAI,CAACC,GAAL,CAAS,GAAT,EAAcD,IAAI,CAACE,GAAL,CAASJ,cAAT,EAAyB,CAAzB,CAAd,CAApB;AACA,SAAOC,WAAP;AACD","sourcesContent":["export function getZoomOrigin(canvas: HTMLCanvasElement | null) {\n  if (canvas === null) {\n    return { x: 0, y: 0 };\n  }\n  const context = canvas.getContext(\"2d\");\n  if (context === null) {\n    return { x: 0, y: 0 };\n  }\n\n  const normalizedCanvasWidth = canvas.width / context.getTransform().a;\n  const normalizedCanvasHeight = canvas.height / context.getTransform().d;\n\n  return {\n    x: normalizedCanvasWidth / 2,\n    y: normalizedCanvasHeight / 2,\n  };\n}\n\nexport function getZoomTranslation(canvas: HTMLCanvasElement, zoom: number) {\n  const diffMiddleOfTheCanvas = {\n    x: (canvas.width / 2) * (zoom - 1),\n    y: (canvas.height / 2) * (zoom - 1),\n  };\n\n  // Due to JavaScript float precision, we fix to fix decimals count to have symmetric zoom\n  return {\n    x: parseFloat(diffMiddleOfTheCanvas.x.toFixed(8)),\n    y: parseFloat(diffMiddleOfTheCanvas.y.toFixed(8)),\n  };\n}\n\nexport function getNormalizedZoom(zoom: number): number {\n  const normalizedZoom = parseFloat(zoom.toFixed(2));\n  const clampedZoom = Math.max(0.1, Math.min(normalizedZoom, 2));\n  return clampedZoom;\n}\n"]},"metadata":{},"sourceType":"module"}