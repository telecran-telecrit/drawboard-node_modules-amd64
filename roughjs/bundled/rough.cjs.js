"use strict";var t="http://www.w3.org/2000/svg";function e(t,e,r){if(t&&t.length){var n=e[0],a=e[1],i=Math.PI/180*r,s=Math.cos(i),o=Math.sin(i);t.forEach((function(t){var e=t[0],r=t[1];t[0]=(e-n)*s-(r-a)*o+n,t[1]=(e-n)*o+(r-a)*s+a}))}}function r(t){var e=t[0],r=t[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}function n(t,e){return t.type===e}var a={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:4,t:2,V:1,v:1,Z:0,z:0},i=function(){function t(t){this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.parseData(t),this.processPoints()}return t.prototype.tokenize=function(t){for(var e=new Array;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:this.COMMAND,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:this.NUMBER,text:""+parseFloat(RegExp.$1)},t=t.substr(RegExp.$1.length)}return e[e.length]={type:this.EOD,text:""},e},t.prototype.parseData=function(t){var e=this.tokenize(t),r=0,i=e[r],s="BOD";for(this.segments=new Array;!n(i,this.EOD);){var o=void 0,h=new Array;if("BOD"===s){if("M"!==i.text&&"m"!==i.text)return void this.parseData("M0,0"+t);r++,o=a[i.text],s=i.text}else n(i,this.NUMBER)?o=a[s]:(r++,o=a[i.text],s=i.text);if(r+o<e.length){for(var c=r;c<r+o;c++){var u=e[c];if(!n(u,this.NUMBER))return void console.error("Param not a number: "+s+","+u.text);h[h.length]=+u.text}if("number"!=typeof a[s])return void console.error("Bad segment: "+s);var l={key:s,data:h};this.segments.push(l),i=e[r+=o],"M"===s&&(s="L"),"m"===s&&(s="l")}else console.error("Path data ended short")}},Object.defineProperty(t.prototype,"closed",{get:function(){if(void 0===this._closed){this._closed=!1;for(var t=0,e=this.segments;t<e.length;t++){"z"===e[t].key.toLowerCase()&&(this._closed=!0)}}return this._closed},enumerable:!0,configurable:!0}),t.prototype.processPoints=function(){for(var t=null,e=[0,0],r=0;r<this.segments.length;r++){var n=this.segments[r];switch(n.key){case"M":case"L":case"T":n.point=[n.data[0],n.data[1]];break;case"m":case"l":case"t":n.point=[n.data[0]+e[0],n.data[1]+e[1]];break;case"H":n.point=[n.data[0],e[1]];break;case"h":n.point=[n.data[0]+e[0],e[1]];break;case"V":n.point=[e[0],n.data[0]];break;case"v":n.point=[e[0],n.data[0]+e[1]];break;case"z":case"Z":t&&(n.point=[t[0],t[1]]);break;case"C":n.point=[n.data[4],n.data[5]];break;case"c":n.point=[n.data[4]+e[0],n.data[5]+e[1]];break;case"S":n.point=[n.data[2],n.data[3]];break;case"s":n.point=[n.data[2]+e[0],n.data[3]+e[1]];break;case"Q":n.point=[n.data[2],n.data[3]];break;case"q":n.point=[n.data[2]+e[0],n.data[3]+e[1]];break;case"A":n.point=[n.data[5],n.data[6]];break;case"a":n.point=[n.data[5]+e[0],n.data[6]+e[1]]}"m"!==n.key&&"M"!==n.key||(t=null),n.point&&(e=n.point,t||(t=n.point)),"z"!==n.key&&"Z"!==n.key||(t=null)}},t}(),s=function(){function t(t){this._position=[0,0],this._first=null,this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this.parsed=new i(t)}return Object.defineProperty(t.prototype,"segments",{get:function(){return this.parsed.segments},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closed",{get:function(){return this.parsed.closed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linearPoints",{get:function(){if(!this._linearPoints){for(var t=[],e=[],r=0,n=this.parsed.segments;r<n.length;r++){var a=n[r],i=a.key.toLowerCase();("m"!==i&&"z"!==i||(e.length&&(t.push(e),e=[]),"z"!==i))&&(a.point&&e.push(a.point))}e.length&&(t.push(e),e=[]),this._linearPoints=t}return this._linearPoints},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._first},set:function(t){this._first=t},enumerable:!0,configurable:!0}),t.prototype.setPosition=function(t,e){this._position=[t,e],this._first||(this._first=[t,e])},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._position[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._position[1]},enumerable:!0,configurable:!0}),t}(),o=function(){function t(t,e,r,n,a,i){if(this._segIndex=0,this._numSegs=0,this._rx=0,this._ry=0,this._sinPhi=0,this._cosPhi=0,this._C=[0,0],this._theta=0,this._delta=0,this._T=0,this._from=t,t[0]!==e[0]||t[1]!==e[1]){var s=Math.PI/180;this._rx=Math.abs(r[0]),this._ry=Math.abs(r[1]),this._sinPhi=Math.sin(n*s),this._cosPhi=Math.cos(n*s);var o=this._cosPhi*(t[0]-e[0])/2+this._sinPhi*(t[1]-e[1])/2,h=-this._sinPhi*(t[0]-e[0])/2+this._cosPhi*(t[1]-e[1])/2,c=0,u=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*h*h-this._ry*this._ry*o*o;if(u<0){var l=Math.sqrt(1-u/(this._rx*this._rx*this._ry*this._ry));this._rx=this._rx*l,this._ry=this._ry*l,c=0}else c=(a===i?-1:1)*Math.sqrt(u/(this._rx*this._rx*h*h+this._ry*this._ry*o*o));var p=c*this._rx*h/this._ry,f=-c*this._ry*o/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*p-this._sinPhi*f+(t[0]+e[0])/2,this._C[1]=this._sinPhi*p+this._cosPhi*f+(t[1]+e[1])/2,this._theta=this.calculateVectorAngle(1,0,(o-p)/this._rx,(h-f)/this._ry);var d=this.calculateVectorAngle((o-p)/this._rx,(h-f)/this._ry,(-o-p)/this._rx,(-h-f)/this._ry);!i&&d>0?d-=2*Math.PI:i&&d<0&&(d+=2*Math.PI),this._numSegs=Math.ceil(Math.abs(d/(Math.PI/2))),this._delta=d/this._numSegs,this._T=8/3*Math.sin(this._delta/4)*Math.sin(this._delta/4)/Math.sin(this._delta/2)}}return t.prototype.getNextSegment=function(){if(this._segIndex===this._numSegs)return null;var t=Math.cos(this._theta),e=Math.sin(this._theta),r=this._theta+this._delta,n=Math.cos(r),a=Math.sin(r),i=[this._cosPhi*this._rx*n-this._sinPhi*this._ry*a+this._C[0],this._sinPhi*this._rx*n+this._cosPhi*this._ry*a+this._C[1]],s=[this._from[0]+this._T*(-this._cosPhi*this._rx*e-this._sinPhi*this._ry*t),this._from[1]+this._T*(-this._sinPhi*this._rx*e+this._cosPhi*this._ry*t)],o=[i[0]+this._T*(this._cosPhi*this._rx*a+this._sinPhi*this._ry*n),i[1]+this._T*(this._sinPhi*this._rx*a-this._cosPhi*this._ry*n)];return this._theta=r,this._from=[i[0],i[1]],this._segIndex++,{cp1:s,cp2:o,to:i}},t.prototype.calculateVectorAngle=function(t,e,r,n){var a=Math.atan2(e,t),i=Math.atan2(n,r);return i>=a?i-a:2*Math.PI-(a-i)},t}(),h=function(){function t(t,e){this.sets=t,this.closed=e}return t.prototype.fit=function(t){for(var e=[],r=0,n=this.sets;r<n.length;r++){var a=(c=n[r]).length,i=Math.floor(t*a);if(i<5){if(a<=5)continue;i=5}e.push(this.reduce(c,i))}for(var s="",o=0,h=e;o<h.length;o++){for(var c=h[o],u=0;u<c.length;u++){var l=c[u];s+=0===u?"M"+l[0]+","+l[1]:"L"+l[0]+","+l[1]}this.closed&&(s+="z ")}return s},t.prototype.reduce=function(t,e){if(t.length<=e)return t;for(var n=t.slice(0);n.length>e;){for(var a=[],i=-1,s=-1,o=1;o<n.length-1;o++){var h=r([n[o-1],n[o]]),c=r([n[o],n[o+1]]),u=r([n[o-1],n[o+1]]),l=(h+c+u)/2,p=Math.sqrt(l*(l-h)*(l-c)*(l-u));a.push(p),(i<0||p<i)&&(i=p,s=o)}if(!(s>0))break;n.splice(s,1)}return n},t}(),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function u(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function l(t,r){var n=[0,0],a=Math.round(r.hachureAngle+90);a&&e(t,n,a);var i=function(t,e){var r=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),a=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,a++)n[a]=i[s];return n}(t);r[0].join(",")!==r[r.length-1].join(",")&&r.push([r[0][0],r[0][1]]);var n=[];if(r&&r.length>2){var a=e.hachureGap;a<0&&(a=4*e.strokeWidth),a=Math.max(a,.1);for(var i=[],s=0;s<r.length-1;s++){var o=r[s],h=r[s+1];if(o[1]!==h[1]){var c=Math.min(o[1],h[1]);i.push({ymin:c,ymax:Math.max(o[1],h[1]),x:c===o[1]?o[0]:h[0],islope:(h[0]-o[0])/(h[1]-o[1])})}}if(i.sort((function(t,e){return t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)})),!i.length)return n;for(var u=[],l=i[0].ymin;u.length||i.length;){if(i.length){var p=-1;for(s=0;s<i.length&&!(i[s].ymin>l);s++)p=s;i.splice(0,p+1).forEach((function(t){u.push({s:l,edge:t})}))}if((u=u.filter((function(t){return!(t.edge.ymax<=l)}))).sort((function(t,e){return t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)})),u.length>1)for(s=0;s<u.length;s+=2){var f=s+1;if(f>=u.length)break;var d=u[s].edge,v=u[f].edge;n.push([[Math.round(d.x),l],[Math.round(v.x),l]])}l+=a,u.forEach((function(t){t.edge.x=t.edge.x+a*t.edge.islope}))}}return n}(t,r);return a&&(e(t,n,-a),function(t,r,n){var a=[];t.forEach((function(t){return a.push.apply(a,t)})),e(a,r,n)}(i,n,-a)),i}var p=function(){function t(t){this.helper=t}return t.prototype.fillPolygon=function(t,e){return this._fillPolygon(t,e)},t.prototype._fillPolygon=function(t,e,r){void 0===r&&(r=!1);var n=l(t,e);return{type:"fillSketch",ops:this.renderLines(n,e,r)}},t.prototype.renderLines=function(t,e,r){for(var n=[],a=null,i=0,s=t;i<s.length;i++){var o=s[i];n=n.concat(this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],e)),r&&a&&(n=n.concat(this.helper.doubleLineOps(a[0],a[1],o[0][0],o[0][1],e))),a=o[1]}return n},t}(),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.fillPolygon=function(t,e){return this._fillPolygon(t,e,!0)},e}(p),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.fillPolygon=function(t,e){var r=this._fillPolygon(t,e),n=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),a=this._fillPolygon(t,n);return r.ops=r.ops.concat(a.ops),r},e}(p),v=function(){function t(t){this.helper=t}return t.prototype.fillPolygon=function(t,e){var r=l(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0,roughness:1}));return this.dotsOnLines(r,e)},t.prototype.dotsOnLines=function(t,e){var n=[],a=e.hachureGap;a<0&&(a=4*e.strokeWidth),a=Math.max(a,.1);var i=e.fillWeight;i<0&&(i=e.strokeWidth/2);for(var s=0,o=t;s<o.length;s++)for(var h=o[s],c=r(h)/a,u=Math.ceil(c)-1,l=Math.atan((h[1][1]-h[0][1])/(h[1][0]-h[0][0])),p=0;p<u;p++){var f=a*(p+1),d=f*Math.sin(l),v=f*Math.cos(l),g=[h[0][0]-v,h[0][1]+d],y=this.helper.randOffsetWithRange(g[0]-a/4,g[0]+a/4,e),b=this.helper.randOffsetWithRange(g[1]-a/4,g[1]+a/4,e),_=this.helper.ellipse(y,b,i,i,e);n=n.concat(_.ops)}return{type:"fillSketch",ops:n}},t}(),g=function(){function t(t){this.helper=t}return t.prototype.fillPolygon=function(t,e){var r=l(t,e);return{type:"fillSketch",ops:this.dashedLine(r,e)}},t.prototype.dashedLine=function(t,e){var n=this,a=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,i=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,s=[];return t.forEach((function(t){var o=r(t),h=Math.floor(o/(a+i)),c=(o+i-h*(a+i))/2,u=t[0],l=t[1];u[0]>l[0]&&(u=t[1],l=t[0]);for(var p=Math.atan((l[1]-u[1])/(l[0]-u[0])),f=0;f<h;f++){var d=f*(a+i),v=d+a,g=[u[0]+d*Math.cos(p)+c*Math.cos(p),u[1]+d*Math.sin(p)+c*Math.sin(p)],y=[u[0]+v*Math.cos(p)+c*Math.cos(p),u[1]+v*Math.sin(p)+c*Math.sin(p)];s=s.concat(n.helper.doubleLineOps(g[0],g[1],y[0],y[1],e))}})),s},t}(),y=function(){function t(t){this.helper=t}return t.prototype.fillPolygon=function(t,e){var r=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,n=e.zigzagOffset<0?r:e.zigzagOffset,a=l(t,e=Object.assign({},e,{hachureGap:r+n}));return{type:"fillSketch",ops:this.zigzagLines(a,n,e)}},t.prototype.zigzagLines=function(t,e,n){var a=this,i=[];return t.forEach((function(t){var s=r(t),o=Math.round(s/(2*e)),h=t[0],c=t[1];h[0]>c[0]&&(h=t[1],c=t[0]);for(var u=Math.atan((c[1]-h[1])/(c[0]-h[0])),l=0;l<o;l++){var p=2*l*e,f=2*(l+1)*e,d=Math.sqrt(2*Math.pow(e,2)),v=[h[0]+p*Math.cos(u),h[1]+p*Math.sin(u)],g=[h[0]+f*Math.cos(u),h[1]+f*Math.sin(u)],y=[v[0]+d*Math.cos(u+Math.PI/4),v[1]+d*Math.sin(u+Math.PI/4)];i=(i=i.concat(a.helper.doubleLineOps(v[0],v[1],y[0],y[1],n))).concat(a.helper.doubleLineOps(y[0],y[1],g[0],g[1],n))}})),i},t}(),b={};var _=function(){function t(t){this.seed=t}return t.prototype.next=function(){return this.seed?(Math.pow(2,31)-1&(this.seed=Math.imul(48271,this.seed)))/Math.pow(2,31):Math.random()},t}(),m={randOffset:function(t,e){return E(t,e)},randOffsetWithRange:function(t,e,r){return A(t,e,r)},ellipse:function(t,e,r,n,a){var i=w(r,n,a);return S(t,e,a,i).opset},doubleLineOps:function(t,e,r,n,a){return W(t,e,r,n,a)}};function M(t,e,r,n,a){return{type:"path",ops:W(t,e,r,n,a)}}function x(t,e,r){var n=(t||[]).length;if(n>2){for(var a=[],i=0;i<n-1;i++)a=a.concat(W(t[i][0],t[i][1],t[i+1][0],t[i+1][1],r));return e&&(a=a.concat(W(t[n-1][0],t[n-1][1],t[0][0],t[0][1],r))),{type:"path",ops:a}}return 2===n?M(t[0][0],t[0][1],t[1][0],t[1][1],r):{type:"path",ops:[]}}function k(t,e,r,n,a){return function(t,e){return x(t,!0,e)}([[t,e],[t+r,e],[t+r,e+n],[t,e+n]],a)}function P(t,e){var r=D(t,1*(1+.2*e.roughness),e),n=D(t,1.5*(1+.22*e.roughness),e);return{type:"path",ops:r.concat(n)}}function w(t,e,r){var n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),a=Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*n),i=2*Math.PI/a,s=Math.abs(t/2),o=Math.abs(e/2),h=1-r.curveFitting;return{increment:i,rx:s+=E(s*h,r),ry:o+=E(o*h,r)}}function S(t,e,r,n){var a=q(n.increment,t,e,n.rx,n.ry,1,n.increment*A(.1,A(.4,1,r),r),r),i=a[0],s=a[1],o=q(n.increment,t,e,n.rx,n.ry,1.5,0,r)[0],h=I(i,null,r),c=I(o,null,r);return{estimatedPoints:s,opset:{type:"path",ops:h.concat(c)}}}function O(t,e,r,n,a,i,s,o,h){var c=t,u=e,l=Math.abs(r/2),p=Math.abs(n/2);l+=E(.01*l,h),p+=E(.01*p,h);for(var f=a,d=i;f<0;)f+=2*Math.PI,d+=2*Math.PI;d-f>2*Math.PI&&(f=0,d=2*Math.PI);var v=2*Math.PI/h.curveStepCount,g=Math.min(v/2,(d-f)/2),y=N(g,c,u,l,p,f,d,1,h),b=N(g,c,u,l,p,f,d,1.5,h),_=y.concat(b);return s&&(o?_=(_=_.concat(W(c,u,c+l*Math.cos(f),u+p*Math.sin(f),h))).concat(W(c,u,c+l*Math.cos(d),u+p*Math.sin(d),h)):(_.push({op:"lineTo",data:[c,u]}),_.push({op:"lineTo",data:[c+l*Math.cos(f),u+p*Math.sin(f)]}))),{type:"path",ops:_}}function T(t,e){var r=[];if(t.length){var n=e.maxRandomnessOffset||0,a=t.length;if(a>2){r.push({op:"move",data:[t[0][0]+E(n,e),t[0][1]+E(n,e)]});for(var i=1;i<a;i++)r.push({op:"lineTo",data:[t[i][0]+E(n,e),t[i][1]+E(n,e)]})}}return{type:"fillPath",ops:r}}function C(t,e){return function(t,e){var r=t.fillStyle||"hachure";if(!b[r])switch(r){case"zigzag":b[r]||(b[r]=new f(e));break;case"cross-hatch":b[r]||(b[r]=new d(e));break;case"dots":b[r]||(b[r]=new v(e));break;case"dashed":b[r]||(b[r]=new g(e));break;case"zigzag-line":b[r]||(b[r]=new y(e));break;case"hachure":default:b[r="hachure"]||(b[r]=new p(e))}return b[r]}(e,m).fillPolygon(t,e)}function z(t){return t.randomizer||(t.randomizer=new _(t.seed||0)),t.randomizer.next()}function A(t,e,r){return r.roughness*r.roughnessGain*(z(r)*(e-t)+t)}function E(t,e){return A(-t,t,e)}function W(t,e,r,n,a){var i=R(t,e,r,n,a,!0,!1),s=R(t,e,r,n,a,!0,!0);return i.concat(s)}function R(t,e,r,n,a,i,s){var o=Math.pow(t-r,2)+Math.pow(e-n,2),h=Math.sqrt(o);a.roughnessGain=h<200?1:h>500?.4:-.0016668*h+1.233334;var c=a.maxRandomnessOffset||0;c*c*100>o&&(c=h/10);var u=c/2,l=.2+.2*z(a),p=a.bowing*a.maxRandomnessOffset*(n-e)/200,f=a.bowing*a.maxRandomnessOffset*(t-r)/200;p=E(p,a),f=E(f,a);var d=[],v=function(){return E(u,a)},g=function(){return E(c,a)};return i&&(s?d.push({op:"move",data:[t+v(),e+v()]}):d.push({op:"move",data:[t+E(c,a),e+E(c,a)]})),s?d.push({op:"bcurveTo",data:[p+t+(r-t)*l+v(),f+e+(n-e)*l+v(),p+t+2*(r-t)*l+v(),f+e+2*(n-e)*l+v(),r+v(),n+v()]}):d.push({op:"bcurveTo",data:[p+t+(r-t)*l+g(),f+e+(n-e)*l+g(),p+t+2*(r-t)*l+g(),f+e+2*(n-e)*l+g(),r+g(),n+g()]}),d}function D(t,e,r){var n=[];n.push([t[0][0]+E(e,r),t[0][1]+E(e,r)]),n.push([t[0][0]+E(e,r),t[0][1]+E(e,r)]);for(var a=1;a<t.length;a++)n.push([t[a][0]+E(e,r),t[a][1]+E(e,r)]),a===t.length-1&&n.push([t[a][0]+E(e,r),t[a][1]+E(e,r)]);return I(n,null,r)}function I(t,e,r){var n=t.length,a=[];if(n>3){var i=[],s=1-r.curveTightness;a.push({op:"move",data:[t[1][0],t[1][1]]});for(var o=1;o+2<n;o++){var h=t[o];i[0]=[h[0],h[1]],i[1]=[h[0]+(s*t[o+1][0]-s*t[o-1][0])/6,h[1]+(s*t[o+1][1]-s*t[o-1][1])/6],i[2]=[t[o+1][0]+(s*t[o][0]-s*t[o+2][0])/6,t[o+1][1]+(s*t[o][1]-s*t[o+2][1])/6],i[3]=[t[o+1][0],t[o+1][1]],a.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}if(e&&2===e.length){var c=r.maxRandomnessOffset;a.push({op:"lineTo",data:[e[0]+E(c,r),e[1]+E(c,r)]})}}else 3===n?(a.push({op:"move",data:[t[1][0],t[1][1]]}),a.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===n&&(a=a.concat(W(t[0][0],t[0][1],t[1][0],t[1][1],r)));return a}function q(t,e,r,n,a,i,s,o){var h=[],c=[],u=E(.5,o)-Math.PI/2;c.push([E(i,o)+e+.9*n*Math.cos(u-t),E(i,o)+r+.9*a*Math.sin(u-t)]);for(var l=u;l<2*Math.PI+u-.01;l+=t){var p=[E(i,o)+e+n*Math.cos(l),E(i,o)+r+a*Math.sin(l)];h.push(p),c.push(p)}return c.push([E(i,o)+e+n*Math.cos(u+2*Math.PI+.5*s),E(i,o)+r+a*Math.sin(u+2*Math.PI+.5*s)]),c.push([E(i,o)+e+.98*n*Math.cos(u+s),E(i,o)+r+.98*a*Math.sin(u+s)]),c.push([E(i,o)+e+.9*n*Math.cos(u+.5*s),E(i,o)+r+.9*a*Math.sin(u+.5*s)]),[c,h]}function N(t,e,r,n,a,i,s,o,h){var c=i+E(.1,h),u=[];u.push([E(o,h)+e+.9*n*Math.cos(c-t),E(o,h)+r+.9*a*Math.sin(c-t)]);for(var l=c;l<=s;l+=t)u.push([E(o,h)+e+n*Math.cos(l),E(o,h)+r+a*Math.sin(l)]);return u.push([e+n*Math.cos(s),r+a*Math.sin(s)]),u.push([e+n*Math.cos(s),r+a*Math.sin(s)]),I(u,null,h)}function L(t,e,r,n,a,i,s,o){for(var h=[],c=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.5],u=[0,0],l=0;l<2;l++)0===l?h.push({op:"move",data:[s.x,s.y]}):h.push({op:"move",data:[s.x+E(c[0],o),s.y+E(c[0],o)]}),u=[a+E(c[l],o),i+E(c[l],o)],h.push({op:"bcurveTo",data:[t+E(c[l],o),e+E(c[l],o),r+E(c[l],o),n+E(c[l],o),u[0],u[1]]});return s.setPosition(u[0],u[1]),h}function j(t,e,r,n){var a=[];switch(e.key){case"M":case"m":var i="m"===e.key;if(e.data.length>=2){var s=+e.data[0],h=+e.data[1];i&&(s+=t.x,h+=t.y);var c=1*(n.maxRandomnessOffset||0);s+=E(c,n),h+=E(c,n),t.setPosition(s,h),a.push({op:"move",data:[s,h]})}break;case"L":case"l":i="l"===e.key;if(e.data.length>=2){s=+e.data[0],h=+e.data[1];i&&(s+=t.x,h+=t.y),a=a.concat(W(t.x,t.y,s,h,n)),t.setPosition(s,h)}break;case"H":case"h":i="h"===e.key;if(e.data.length){s=+e.data[0];i&&(s+=t.x),a=a.concat(W(t.x,t.y,s,t.y,n)),t.setPosition(s,t.y)}break;case"V":case"v":i="v"===e.key;if(e.data.length){h=+e.data[0];i&&(h+=t.y),a=a.concat(W(t.x,t.y,t.x,h,n)),t.setPosition(t.x,h)}break;case"Z":case"z":t.first&&(a=a.concat(W(t.x,t.y,t.first[0],t.first[1],n)),t.setPosition(t.first[0],t.first[1]),t.first=null);break;case"C":case"c":i="c"===e.key;if(e.data.length>=6){var u=+e.data[0],l=+e.data[1],p=+e.data[2],f=+e.data[3];s=+e.data[4],h=+e.data[5];i&&(u+=t.x,p+=t.x,s+=t.x,l+=t.y,f+=t.y,h+=t.y);var d=L(u,l,p,f,s,h,t,n);a=a.concat(d),t.bezierReflectionPoint=[s+(s-p),h+(h-f)]}break;case"S":case"s":i="s"===e.key;if(e.data.length>=4){p=+e.data[0],f=+e.data[1],s=+e.data[2],h=+e.data[3];i&&(p+=t.x,s+=t.x,f+=t.y,h+=t.y);u=p,l=f;var v=null;"c"!==(_=r?r.key:"")&&"C"!==_&&"s"!==_&&"S"!==_||(v=t.bezierReflectionPoint),v&&(u=v[0],l=v[1]);d=L(u,l,p,f,s,h,t,n);a=a.concat(d),t.bezierReflectionPoint=[s+(s-p),h+(h-f)]}break;case"Q":case"q":i="q"===e.key;if(e.data.length>=4){u=+e.data[0],l=+e.data[1],s=+e.data[2],h=+e.data[3];i&&(u+=t.x,s+=t.x,l+=t.y,h+=t.y);var g=1*(1+.2*n.roughness),y=1.5*(1+.22*n.roughness);a.push({op:"move",data:[t.x+E(g,n),t.y+E(g,n)]});var b=[s+E(g,n),h+E(g,n)];a.push({op:"qcurveTo",data:[u+E(g,n),l+E(g,n),b[0],b[1]]}),a.push({op:"move",data:[t.x+E(y,n),t.y+E(y,n)]}),b=[s+E(y,n),h+E(y,n)],a.push({op:"qcurveTo",data:[u+E(y,n),l+E(y,n),b[0],b[1]]}),t.setPosition(b[0],b[1]),t.quadReflectionPoint=[s+(s-u),h+(h-l)]}break;case"T":case"t":i="t"===e.key;if(e.data.length>=2){s=+e.data[0],h=+e.data[1];i&&(s+=t.x,h+=t.y);var _;u=s,l=h,v=null;"q"!==(_=r?r.key:"")&&"Q"!==_&&"t"!==_&&"T"!==_||(v=t.quadReflectionPoint),v&&(u=v[0],l=v[1]);g=1*(1+.2*n.roughness),y=1.5*(1+.22*n.roughness);a.push({op:"move",data:[t.x+E(g,n),t.y+E(g,n)]});b=[s+E(g,n),h+E(g,n)];a.push({op:"qcurveTo",data:[u+E(g,n),l+E(g,n),b[0],b[1]]}),a.push({op:"move",data:[t.x+E(y,n),t.y+E(y,n)]}),b=[s+E(y,n),h+E(y,n)],a.push({op:"qcurveTo",data:[u+E(y,n),l+E(y,n),b[0],b[1]]}),t.setPosition(b[0],b[1]),t.quadReflectionPoint=[s+(s-u),h+(h-l)]}break;case"A":case"a":i="a"===e.key;if(e.data.length>=7){var m=+e.data[0],M=+e.data[1],x=+e.data[2],k=+e.data[3],P=+e.data[4];s=+e.data[5],h=+e.data[6];if(i&&(s+=t.x,h+=t.y),s===t.x&&h===t.y)break;if(0===m||0===M)a=a.concat(W(t.x,t.y,s,h,n)),t.setPosition(s,h);else for(var w=0;w<1;w++)for(var S=new o([t.x,t.y],[s,h],[m,M],x,!!k,!!P),O=S.getNextSegment();O;){d=L(O.cp1[0],O.cp1[1],O.cp2[0],O.cp2[1],O.to[0],O.to[1],t,n);a=a.concat(d),O=S.getNextSegment()}}}return a}var B="undefined"!=typeof self,G="none",V=function(){function e(t,e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,roughnessGain:1},this.config=t||{},this.surface=e,this.config.options&&(this.defaultOptions=this._options(this.config.options))}return e.newSeed=function(){return Math.floor(Math.random()*Math.pow(2,31))},e.prototype._options=function(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions},e.prototype._drawable=function(t,e,r){return{shape:t,sets:e||[],options:r||this.defaultOptions}},e.prototype.line=function(t,e,r,n,a){var i=this._options(a);return this._drawable("line",[M(t,e,r,n,i)],i)},e.prototype.rectangle=function(t,e,r,n,a){var i=this._options(a),s=[],o=k(t,e,r,n,i);if(i.fill){var h=[[t,e],[t+r,e],[t+r,e+n],[t,e+n]];"solid"===i.fillStyle?s.push(T(h,i)):s.push(C(h,i))}return i.stroke!==G&&s.push(o),this._drawable("rectangle",s,i)},e.prototype.ellipse=function(t,e,r,n,a){var i=this._options(a),s=[],o=w(r,n,i),h=S(t,e,i,o);if(i.fill)if("solid"===i.fillStyle){var c=S(t,e,i,o).opset;c.type="fillPath",s.push(c)}else s.push(C(h.estimatedPoints,i));return i.stroke!==G&&s.push(h.opset),this._drawable("ellipse",s,i)},e.prototype.circle=function(t,e,r,n){var a=this.ellipse(t,e,r,r,n);return a.shape="circle",a},e.prototype.linearPath=function(t,e){var r=this._options(e);return this._drawable("linearPath",[x(t,!1,r)],r)},e.prototype.arc=function(t,e,r,n,a,i,s,o){void 0===s&&(s=!1);var h=this._options(o),c=[],u=O(t,e,r,n,a,i,s,!0,h);if(s&&h.fill)if("solid"===h.fillStyle){var l=O(t,e,r,n,a,i,!0,!1,h);l.type="fillPath",c.push(l)}else c.push(function(t,e,r,n,a,i,s){var o=t,h=e,c=Math.abs(r/2),u=Math.abs(n/2);c+=E(.01*c,s),u+=E(.01*u,s);for(var l=a,p=i;l<0;)l+=2*Math.PI,p+=2*Math.PI;p-l>2*Math.PI&&(l=0,p=2*Math.PI);for(var f=(p-l)/s.curveStepCount,d=[],v=l;v<=p;v+=f)d.push([o+c*Math.cos(v),h+u*Math.sin(v)]);return d.push([o+c*Math.cos(p),h+u*Math.sin(p)]),d.push([o,h]),C(d,s)}(t,e,r,n,a,i,h));return h.stroke!==G&&c.push(u),this._drawable("arc",c,h)},e.prototype.curve=function(t,e){var r=this._options(e);return this._drawable("curve",[P(t,r)],r)},e.prototype.polygon=function(t,e){var r=this._options(e),n=[],a=x(t,!0,r);return r.fill&&("solid"===r.fillStyle?n.push(T(t,r)):n.push(C(t,r))),r.stroke!==G&&n.push(a),this._drawable("polygon",n,r)},e.prototype.path=function(t,e){var r=this._options(e),n=[];if(!t)return this._drawable("path",n,r);var a=function(t,e){t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");var r=new s(t);if(e.simplification){var n=new h(r.linearPoints,r.closed).fit(e.simplification);r=new s(n)}for(var a=[],i=r.segments||[],o=0;o<i.length;o++){var c=j(r,i[o],o>0?i[o-1]:null,e);c&&c.length&&(a=a.concat(c))}return{type:"path",ops:a}}(t,r);if(r.fill)if("solid"===r.fillStyle){var i={type:"path2Dfill",path:t,ops:[]};n.push(i)}else{var o=this.computePathSize(t);(i=C([[0,0],[o[0],0],[o[0],o[1]],[0,o[1]]],r)).type="path2Dpattern",i.size=o,i.path=t,n.push(i)}return r.stroke!==G&&n.push(a),this._drawable("path",n,r)},e.prototype.computePathSize=function(e){var r=[0,0];if(B&&self.document)try{var n=self.document.createElementNS(t,"svg");n.setAttribute("width","0"),n.setAttribute("height","0");var a=self.document.createElementNS(t,"path");a.setAttribute("d",e),n.appendChild(a),self.document.body.appendChild(n);var i=a.getBBox();i&&(r[0]=i.width||0,r[1]=i.height||0),self.document.body.removeChild(n)}catch(t){}var s=this.getCanvasSize();return r[0]*r[1]||(r=s),r},e.prototype.getCanvasSize=function(){var t=function(t){return t&&"object"==typeof t&&t.baseVal&&t.baseVal.value?t.baseVal.value:t||100};return this.surface?[t(this.surface.width),t(this.surface.height)]:[100,100]},e.prototype.opsToPath=function(t){for(var e="",r=0,n=t.ops;r<n.length;r++){var a=n[r],i=a.data;switch(a.op){case"move":e+="M"+i[0]+" "+i[1]+" ";break;case"bcurveTo":e+="C"+i[0]+" "+i[1]+", "+i[2]+" "+i[3]+", "+i[4]+" "+i[5]+" ";break;case"qcurveTo":e+="Q"+i[0]+" "+i[1]+", "+i[2]+" "+i[3]+" ";break;case"lineTo":e+="L"+i[0]+" "+i[1]+" "}}return e.trim()},e.prototype.toPaths=function(t){for(var e=t.sets||[],r=t.options||this.defaultOptions,n=[],a=0,i=e;a<i.length;a++){var s=i[a],o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:G};break;case"fillPath":o={d:this.opsToPath(s),stroke:G,strokeWidth:0,fill:r.fill||G};break;case"fillSketch":o=this.fillSketch(s,r);break;case"path2Dfill":o={d:s.path||"",stroke:G,strokeWidth:0,fill:r.fill||G};break;case"path2Dpattern":var h=s.size,c={x:0,y:0,width:1,height:1,viewBox:"0 0 "+Math.round(h[0])+" "+Math.round(h[1]),patternUnits:"objectBoundingBox",path:this.fillSketch(s,r)};o={d:s.path,stroke:G,strokeWidth:0,pattern:c}}o&&n.push(o)}return n},e.prototype.fillSketch=function(t,e){var r=e.fillWeight;return r<0&&(r=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||G,strokeWidth:r,fill:G}},e}(),Q="undefined"!=typeof document,U=function(){function e(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new V(e,this.canvas)}return e.prototype.draw=function(t){for(var e=t.sets||[],r=t.options||this.getDefaultOptions(),n=this.ctx,a=0,i=e;a<i.length;a++){var s=i[a];switch(s.type){case"path":n.save(),n.strokeStyle="none"===r.stroke?"transparent":r.stroke,n.lineWidth=r.strokeWidth,this._drawToContext(n,s),n.restore();break;case"fillPath":n.save(),n.fillStyle=r.fill||"",this._drawToContext(n,s),n.restore();break;case"fillSketch":this.fillSketch(n,s,r);break;case"path2Dfill":this.ctx.save(),this.ctx.fillStyle=r.fill||"";var o=new Path2D(s.path);this.ctx.fill(o),this.ctx.restore();break;case"path2Dpattern":var h=this.canvas.ownerDocument||Q&&document;if(h){var c=s.size,u=h.createElement("canvas"),l=u.getContext("2d"),p=this.computeBBox(s.path);p&&(p.width||p.height)?(u.width=this.canvas.width,u.height=this.canvas.height,l.translate(p.x||0,p.y||0)):(u.width=c[0],u.height=c[1]),this.fillSketch(l,s,r),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(u,"repeat");o=new Path2D(s.path);this.ctx.fill(o),this.ctx.restore()}else console.error("Pattern fill fail: No defs")}}},e.prototype.computeBBox=function(e){if(Q)try{var r=document.createElementNS(t,"svg");r.setAttribute("width","0"),r.setAttribute("height","0");var n=self.document.createElementNS(t,"path");n.setAttribute("d",e),r.appendChild(n),document.body.appendChild(r);var a=n.getBBox();return document.body.removeChild(r),a}catch(t){}return null},e.prototype.fillSketch=function(t,e,r){var n=r.fillWeight;n<0&&(n=r.strokeWidth/2),t.save(),t.strokeStyle=r.fill||"",t.lineWidth=n,this._drawToContext(t,e),t.restore()},e.prototype._drawToContext=function(t,e){t.beginPath();for(var r=0,n=e.ops;r<n.length;r++){var a=n[r],i=a.data;switch(a.op){case"move":t.moveTo(i[0],i[1]);break;case"bcurveTo":t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"qcurveTo":t.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case"lineTo":t.lineTo(i[0],i[1])}}"fillPath"===e.type?t.fill():t.stroke()},Object.defineProperty(e.prototype,"generator",{get:function(){return this.gen},enumerable:!0,configurable:!0}),e.prototype.getDefaultOptions=function(){return this.gen.defaultOptions},e.prototype.line=function(t,e,r,n,a){var i=this.gen.line(t,e,r,n,a);return this.draw(i),i},e.prototype.rectangle=function(t,e,r,n,a){var i=this.gen.rectangle(t,e,r,n,a);return this.draw(i),i},e.prototype.ellipse=function(t,e,r,n,a){var i=this.gen.ellipse(t,e,r,n,a);return this.draw(i),i},e.prototype.circle=function(t,e,r,n){var a=this.gen.circle(t,e,r,n);return this.draw(a),a},e.prototype.linearPath=function(t,e){var r=this.gen.linearPath(t,e);return this.draw(r),r},e.prototype.polygon=function(t,e){var r=this.gen.polygon(t,e);return this.draw(r),r},e.prototype.arc=function(t,e,r,n,a,i,s,o){void 0===s&&(s=!1);var h=this.gen.arc(t,e,r,n,a,i,s,o);return this.draw(h),h},e.prototype.curve=function(t,e){var r=this.gen.curve(t,e);return this.draw(r),r},e.prototype.path=function(t,e){var r=this.gen.path(t,e);return this.draw(r),r},e}(),Z="undefined"!=typeof document,$=function(){function e(t,e){this.svg=t,this.gen=new V(e,this.svg)}return Object.defineProperty(e.prototype,"defs",{get:function(){var e=this.svg.ownerDocument||Z&&document;if(e&&!this._defs){var r=e.createElementNS(t,"defs");this.svg.firstChild?this.svg.insertBefore(r,this.svg.firstChild):this.svg.appendChild(r),this._defs=r}return this._defs||null},enumerable:!0,configurable:!0}),e.prototype.draw=function(e){for(var r=e.sets||[],n=e.options||this.getDefaultOptions(),a=this.svg.ownerDocument||window.document,i=a.createElementNS(t,"g"),s=0,o=r;s<o.length;s++){var h=o[s],c=null;switch(h.type){case"path":(c=a.createElementNS(t,"path")).setAttribute("d",this.opsToPath(h)),c.style.stroke=n.stroke,c.style.strokeWidth=n.strokeWidth+"",c.style.fill="none";break;case"fillPath":(c=a.createElementNS(t,"path")).setAttribute("d",this.opsToPath(h)),c.style.stroke="none",c.style.strokeWidth="0",c.style.fill=n.fill||"";break;case"fillSketch":c=this.fillSketch(a,h,n);break;case"path2Dfill":(c=a.createElementNS(t,"path")).setAttribute("d",h.path||""),c.style.stroke="none",c.style.strokeWidth="0",c.style.fill=n.fill||"";break;case"path2Dpattern":if(this.defs){var u=h.size,l=a.createElementNS(t,"pattern"),p="rough-"+Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER||999999));l.setAttribute("id",p),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("width","1"),l.setAttribute("height","1"),l.setAttribute("height","1"),l.setAttribute("viewBox","0 0 "+Math.round(u[0])+" "+Math.round(u[1])),l.setAttribute("patternUnits","objectBoundingBox");var f=this.fillSketch(a,h,n);l.appendChild(f),this.defs.appendChild(l),(c=a.createElementNS(t,"path")).setAttribute("d",h.path||""),c.style.stroke="none",c.style.strokeWidth="0",c.style.fill="url(#"+p+")"}else console.error("Pattern fill fail: No defs")}c&&i.appendChild(c)}return i},e.prototype.fillSketch=function(e,r,n){var a=n.fillWeight;a<0&&(a=n.strokeWidth/2);var i=e.createElementNS(t,"path");return i.setAttribute("d",this.opsToPath(r)),i.style.stroke=n.fill||"",i.style.strokeWidth=a+"",i.style.fill="none",i},Object.defineProperty(e.prototype,"generator",{get:function(){return this.gen},enumerable:!0,configurable:!0}),e.prototype.getDefaultOptions=function(){return this.gen.defaultOptions},e.prototype.opsToPath=function(t){return this.gen.opsToPath(t)},e.prototype.line=function(t,e,r,n,a){var i=this.gen.line(t,e,r,n,a);return this.draw(i)},e.prototype.rectangle=function(t,e,r,n,a){var i=this.gen.rectangle(t,e,r,n,a);return this.draw(i)},e.prototype.ellipse=function(t,e,r,n,a){var i=this.gen.ellipse(t,e,r,n,a);return this.draw(i)},e.prototype.circle=function(t,e,r,n){var a=this.gen.circle(t,e,r,n);return this.draw(a)},e.prototype.linearPath=function(t,e){var r=this.gen.linearPath(t,e);return this.draw(r)},e.prototype.polygon=function(t,e){var r=this.gen.polygon(t,e);return this.draw(r)},e.prototype.arc=function(t,e,r,n,a,i,s,o){void 0===s&&(s=!1);var h=this.gen.arc(t,e,r,n,a,i,s,o);return this.draw(h)},e.prototype.curve=function(t,e){var r=this.gen.curve(t,e);return this.draw(r)},e.prototype.path=function(t,e){var r=this.gen.path(t,e);return this.draw(r)},e}(),F={canvas:function(t,e){return new U(t,e)},svg:function(t,e){return new $(t,e)},generator:function(t,e){return new V(t,e)},newSeed:function(){return V.newSeed()}};module.exports=F;
