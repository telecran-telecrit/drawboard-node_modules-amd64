"use strict";var t="http://www.w3.org/2000/svg";function e(t,e,r){if(t&&t.length){var a=e[0],n=e[1],i=Math.PI/180*r,s=Math.cos(i),o=Math.sin(i);t.forEach((function(t){var e=t[0],r=t[1];t[0]=(e-a)*s-(r-n)*o+a,t[1]=(e-a)*o+(r-n)*s+n}))}}function r(t){var e=t[0],r=t[1];return Math.sqrt(Math.pow(e[0]-r[0],2)+Math.pow(e[1]-r[1],2))}function a(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function n(t,e,i,s){var o=s||[];if(function(t,e){var r=t[e+0],a=t[e+1],n=t[e+2],i=t[e+3],s=3*a[0]-2*r[0]-i[0];s*=s;var o=3*a[1]-2*r[1]-i[1];o*=o;var h=3*n[0]-2*i[0]-r[0];h*=h;var u=3*n[1]-2*i[1]-r[1];return s<h&&(s=h),o<(u*=u)&&(o=u),s+o}(t,e)<i){var h=t[e+0];if(o.length)r([o[o.length-1],h])>1&&o.push(h);else o.push(h);o.push(t[e+3])}else{var u=.5,c=t[e+0],l=t[e+1],p=t[e+2],f=t[e+3],d=a(c,l,u),v=a(l,p,u),g=a(p,f,u),y=a(d,v,u),b=a(v,g,u),_=a(y,b,u);n([c,d,y,_],0,i,o),n([_,b,g,f],0,i,o)}return o}function i(t,e){return t.type===e}var s={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:4,t:2,V:1,v:1,Z:0,z:0},o=function(){function t(t){this.COMMAND=0,this.NUMBER=1,this.EOD=2,this.segments=[],this.parseData(t),this.processPoints()}return t.prototype.tokenize=function(t){for(var e=new Array;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:this.COMMAND,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:this.NUMBER,text:""+parseFloat(RegExp.$1)},t=t.substr(RegExp.$1.length)}return e[e.length]={type:this.EOD,text:""},e},t.prototype.parseData=function(t){var e=this.tokenize(t),r=0,a=e[r],n="BOD";for(this.segments=new Array;!i(a,this.EOD);){var o=void 0,h=new Array;if("BOD"===n){if("M"!==a.text&&"m"!==a.text)return void this.parseData("M0,0"+t);r++,o=s[a.text],n=a.text}else i(a,this.NUMBER)?o=s[n]:(r++,o=s[a.text],n=a.text);if(r+o<e.length){for(var u=r;u<r+o;u++){var c=e[u];if(!i(c,this.NUMBER))return void console.error("Param not a number: "+n+","+c.text);h[h.length]=+c.text}if("number"!=typeof s[n])return void console.error("Bad segment: "+n);var l={key:n,data:h};this.segments.push(l),a=e[r+=o],"M"===n&&(n="L"),"m"===n&&(n="l")}else console.error("Path data ended short")}},Object.defineProperty(t.prototype,"closed",{get:function(){if(void 0===this._closed){this._closed=!1;for(var t=0,e=this.segments;t<e.length;t++){"z"===e[t].key.toLowerCase()&&(this._closed=!0)}}return this._closed},enumerable:!0,configurable:!0}),t.prototype.processPoints=function(){for(var t=null,e=[0,0],r=0;r<this.segments.length;r++){var a=this.segments[r];switch(a.key){case"M":case"L":case"T":a.point=[a.data[0],a.data[1]];break;case"m":case"l":case"t":a.point=[a.data[0]+e[0],a.data[1]+e[1]];break;case"H":a.point=[a.data[0],e[1]];break;case"h":a.point=[a.data[0]+e[0],e[1]];break;case"V":a.point=[e[0],a.data[0]];break;case"v":a.point=[e[0],a.data[0]+e[1]];break;case"z":case"Z":t&&(a.point=[t[0],t[1]]);break;case"C":a.point=[a.data[4],a.data[5]];break;case"c":a.point=[a.data[4]+e[0],a.data[5]+e[1]];break;case"S":a.point=[a.data[2],a.data[3]];break;case"s":a.point=[a.data[2]+e[0],a.data[3]+e[1]];break;case"Q":a.point=[a.data[2],a.data[3]];break;case"q":a.point=[a.data[2]+e[0],a.data[3]+e[1]];break;case"A":a.point=[a.data[5],a.data[6]];break;case"a":a.point=[a.data[5]+e[0],a.data[6]+e[1]]}"m"!==a.key&&"M"!==a.key||(t=null),a.point&&(e=a.point,t||(t=a.point)),"z"!==a.key&&"Z"!==a.key||(t=null)}},t}(),h=function(){function t(t){this._position=[0,0],this._first=null,this.bezierReflectionPoint=null,this.quadReflectionPoint=null,this.parsed=new o(t)}return Object.defineProperty(t.prototype,"segments",{get:function(){return this.parsed.segments},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"closed",{get:function(){return this.parsed.closed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linearPoints",{get:function(){if(!this._linearPoints){for(var t=[],e=[],r=0,a=this.parsed.segments;r<a.length;r++){var n=a[r],i=n.key.toLowerCase();("m"!==i&&"z"!==i||(e.length&&(t.push(e),e=[]),"z"!==i))&&(n.point&&e.push(n.point))}e.length&&(t.push(e),e=[]),this._linearPoints=t}return this._linearPoints},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"first",{get:function(){return this._first},set:function(t){this._first=t},enumerable:!0,configurable:!0}),t.prototype.setPosition=function(t,e){this._position=[t,e],this._first||(this._first=[t,e])},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this._position[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._position[1]},enumerable:!0,configurable:!0}),t}(),u=function(){function t(t,e,r,a,n,i){if(this._segIndex=0,this._numSegs=0,this._rx=0,this._ry=0,this._sinPhi=0,this._cosPhi=0,this._C=[0,0],this._theta=0,this._delta=0,this._T=0,this._from=t,t[0]!==e[0]||t[1]!==e[1]){var s=Math.PI/180;this._rx=Math.abs(r[0]),this._ry=Math.abs(r[1]),this._sinPhi=Math.sin(a*s),this._cosPhi=Math.cos(a*s);var o=this._cosPhi*(t[0]-e[0])/2+this._sinPhi*(t[1]-e[1])/2,h=-this._sinPhi*(t[0]-e[0])/2+this._cosPhi*(t[1]-e[1])/2,u=0,c=this._rx*this._rx*this._ry*this._ry-this._rx*this._rx*h*h-this._ry*this._ry*o*o;if(c<0){var l=Math.sqrt(1-c/(this._rx*this._rx*this._ry*this._ry));this._rx=this._rx*l,this._ry=this._ry*l,u=0}else u=(n===i?-1:1)*Math.sqrt(c/(this._rx*this._rx*h*h+this._ry*this._ry*o*o));var p=u*this._rx*h/this._ry,f=-u*this._ry*o/this._rx;this._C=[0,0],this._C[0]=this._cosPhi*p-this._sinPhi*f+(t[0]+e[0])/2,this._C[1]=this._sinPhi*p+this._cosPhi*f+(t[1]+e[1])/2,this._theta=this.calculateVectorAngle(1,0,(o-p)/this._rx,(h-f)/this._ry);var d=this.calculateVectorAngle((o-p)/this._rx,(h-f)/this._ry,(-o-p)/this._rx,(-h-f)/this._ry);!i&&d>0?d-=2*Math.PI:i&&d<0&&(d+=2*Math.PI),this._numSegs=Math.ceil(Math.abs(d/(Math.PI/2))),this._delta=d/this._numSegs,this._T=8/3*Math.sin(this._delta/4)*Math.sin(this._delta/4)/Math.sin(this._delta/2)}}return t.prototype.getNextSegment=function(){if(this._segIndex===this._numSegs)return null;var t=Math.cos(this._theta),e=Math.sin(this._theta),r=this._theta+this._delta,a=Math.cos(r),n=Math.sin(r),i=[this._cosPhi*this._rx*a-this._sinPhi*this._ry*n+this._C[0],this._sinPhi*this._rx*a+this._cosPhi*this._ry*n+this._C[1]],s=[this._from[0]+this._T*(-this._cosPhi*this._rx*e-this._sinPhi*this._ry*t),this._from[1]+this._T*(-this._sinPhi*this._rx*e+this._cosPhi*this._ry*t)],o=[i[0]+this._T*(this._cosPhi*this._rx*n+this._sinPhi*this._ry*a),i[1]+this._T*(this._sinPhi*this._rx*n-this._cosPhi*this._ry*a)];return this._theta=r,this._from=[i[0],i[1]],this._segIndex++,{cp1:s,cp2:o,to:i}},t.prototype.calculateVectorAngle=function(t,e,r,a){var n=Math.atan2(e,t),i=Math.atan2(a,r);return i>=n?i-n:2*Math.PI-(n-i)},t}(),c=function(){function t(t,e){this.sets=t,this.closed=e}return t.prototype.fit=function(t){for(var e=[],r=0,a=this.sets;r<a.length;r++){var n=(u=a[r]).length,i=Math.floor(t*n);if(i<5){if(n<=5)continue;i=5}e.push(this.reduce(u,i))}for(var s="",o=0,h=e;o<h.length;o++){for(var u=h[o],c=0;c<u.length;c++){var l=u[c];s+=0===c?"M"+l[0]+","+l[1]:"L"+l[0]+","+l[1]}this.closed&&(s+="z ")}return s},t.prototype.reduce=function(t,e){if(t.length<=e)return t;for(var a=t.slice(0);a.length>e;){for(var n=[],i=-1,s=-1,o=1;o<a.length-1;o++){var h=r([a[o-1],a[o]]),u=r([a[o],a[o+1]]),c=r([a[o-1],a[o+1]]),l=(h+u+c)/2,p=Math.sqrt(l*(l-h)*(l-u)*(l-c));n.push(p),(i<0||p<i)&&(i=p,s=o)}if(!(s>0))break;a.splice(s,1)}return a},t}(),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function p(t,e){function r(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function f(t,r){var a=[0,0],n=Math.round(r.hachureAngle+90);n&&e(t,a,n);var i=function(t,e){var r=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var a=Array(t),n=0;for(e=0;e<r;e++)for(var i=arguments[e],s=0,o=i.length;s<o;s++,n++)a[n]=i[s];return a}(t);r[0].join(",")!==r[r.length-1].join(",")&&r.push([r[0][0],r[0][1]]);var a=[];if(r&&r.length>2){var n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);for(var i=[],s=0;s<r.length-1;s++){var o=r[s],h=r[s+1];if(o[1]!==h[1]){var u=Math.min(o[1],h[1]);i.push({ymin:u,ymax:Math.max(o[1],h[1]),x:u===o[1]?o[0]:h[0],islope:(h[0]-o[0])/(h[1]-o[1])})}}if(i.sort((function(t,e){return t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)})),!i.length)return a;for(var c=[],l=i[0].ymin;c.length||i.length;){if(i.length){var p=-1;for(s=0;s<i.length&&!(i[s].ymin>l);s++)p=s;i.splice(0,p+1).forEach((function(t){c.push({s:l,edge:t})}))}if((c=c.filter((function(t){return!(t.edge.ymax<=l)}))).sort((function(t,e){return t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)})),c.length>1)for(s=0;s<c.length;s+=2){var f=s+1;if(f>=c.length)break;var d=c[s].edge,v=c[f].edge;a.push([[Math.round(d.x),l],[Math.round(v.x),l]])}l+=n,c.forEach((function(t){t.edge.x=t.edge.x+n*t.edge.islope}))}}return a}(t,r);return n&&(e(t,a,-n),function(t,r,a){var n=[];t.forEach((function(t){return n.push.apply(n,t)})),e(n,r,a)}(i,a,-n)),i}var d=function(){function t(t){this.helper=t}return t.prototype.fillPolygon=function(t,e){return this._fillPolygon(t,e)},t.prototype._fillPolygon=function(t,e,r){void 0===r&&(r=!1);var a=f(t,e);return{type:"fillSketch",ops:this.renderLines(a,e,r)}},t.prototype.renderLines=function(t,e,r){for(var a=[],n=null,i=0,s=t;i<s.length;i++){var o=s[i];a=a.concat(this.helper.doubleLineOps(o[0][0],o[0][1],o[1][0],o[1][1],e)),r&&n&&(a=a.concat(this.helper.doubleLineOps(n[0],n[1],o[0][0],o[0][1],e))),n=o[1]}return a},t}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.fillPolygon=function(t,e){return this._fillPolygon(t,e,!0)},e}(d),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.fillPolygon=function(t,e){var r=this._fillPolygon(t,e),a=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),n=this._fillPolygon(t,a);return r.ops=r.ops.concat(n.ops),r},e}(d),y=function(){function t(t){this.helper=t}return t.prototype.fillPolygon=function(t,e){var r=f(t,e=Object.assign({},e,{curveStepCount:4,hachureAngle:0,roughness:1}));return this.dotsOnLines(r,e)},t.prototype.dotsOnLines=function(t,e){var a=[],n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);var i=e.fillWeight;i<0&&(i=e.strokeWidth/2);for(var s=0,o=t;s<o.length;s++)for(var h=o[s],u=r(h)/n,c=Math.ceil(u)-1,l=Math.atan((h[1][1]-h[0][1])/(h[1][0]-h[0][0])),p=0;p<c;p++){var f=n*(p+1),d=f*Math.sin(l),v=f*Math.cos(l),g=[h[0][0]-v,h[0][1]+d],y=this.helper.randOffsetWithRange(g[0]-n/4,g[0]+n/4,e),b=this.helper.randOffsetWithRange(g[1]-n/4,g[1]+n/4,e),_=this.helper.ellipse(y,b,i,i,e);a=a.concat(_.ops)}return{type:"fillSketch",ops:a}},t}(),b=function(){function t(t){this.helper=t}return t.prototype.fillPolygon=function(t,e){var r=f(t,e);return{type:"fillSketch",ops:this.dashedLine(r,e)}},t.prototype.dashedLine=function(t,e){var a=this,n=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,i=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,s=[];return t.forEach((function(t){var o=r(t),h=Math.floor(o/(n+i)),u=(o+i-h*(n+i))/2,c=t[0],l=t[1];c[0]>l[0]&&(c=t[1],l=t[0]);for(var p=Math.atan((l[1]-c[1])/(l[0]-c[0])),f=0;f<h;f++){var d=f*(n+i),v=d+n,g=[c[0]+d*Math.cos(p)+u*Math.cos(p),c[1]+d*Math.sin(p)+u*Math.sin(p)],y=[c[0]+v*Math.cos(p)+u*Math.cos(p),c[1]+v*Math.sin(p)+u*Math.sin(p)];s=s.concat(a.helper.doubleLineOps(g[0],g[1],y[0],y[1],e))}})),s},t}(),_=function(){function t(t){this.helper=t}return t.prototype.fillPolygon=function(t,e){var r=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,a=e.zigzagOffset<0?r:e.zigzagOffset,n=f(t,e=Object.assign({},e,{hachureGap:r+a}));return{type:"fillSketch",ops:this.zigzagLines(n,a,e)}},t.prototype.zigzagLines=function(t,e,a){var n=this,i=[];return t.forEach((function(t){var s=r(t),o=Math.round(s/(2*e)),h=t[0],u=t[1];h[0]>u[0]&&(h=t[1],u=t[0]);for(var c=Math.atan((u[1]-h[1])/(u[0]-h[0])),l=0;l<o;l++){var p=2*l*e,f=2*(l+1)*e,d=Math.sqrt(2*Math.pow(e,2)),v=[h[0]+p*Math.cos(c),h[1]+p*Math.sin(c)],g=[h[0]+f*Math.cos(c),h[1]+f*Math.sin(c)],y=[v[0]+d*Math.cos(c+Math.PI/4),v[1]+d*Math.sin(c+Math.PI/4)];i=(i=i.concat(n.helper.doubleLineOps(v[0],v[1],y[0],y[1],a))).concat(n.helper.doubleLineOps(y[0],y[1],g[0],g[1],a))}})),i},t}(),m={};var M=function(){function t(t){this.seed=t}return t.prototype.next=function(){return this.seed?(Math.pow(2,31)-1&(this.seed=Math.imul(48271,this.seed)))/Math.pow(2,31):Math.random()},t}(),x={randOffset:function(t,e){return W(t,e)},randOffsetWithRange:function(t,e,r){return E(t,e,r)},ellipse:function(t,e,r,a,n){var i=S(r,a,n);return O(t,e,n,i).opset},doubleLineOps:function(t,e,r,a,n){return R(t,e,r,a,n)}};function k(t,e,r,a,n){return{type:"path",ops:R(t,e,r,a,n)}}function P(t,e,r){var a=(t||[]).length;if(a>2){for(var n=[],i=0;i<a-1;i++)n=n.concat(R(t[i][0],t[i][1],t[i+1][0],t[i+1][1],r));return e&&(n=n.concat(R(t[a-1][0],t[a-1][1],t[0][0],t[0][1],r))),{type:"path",ops:n}}return 2===a?k(t[0][0],t[0][1],t[1][0],t[1][1],r):{type:"path",ops:[]}}function w(t,e,r,a,n){return function(t,e){return P(t,!0,e)}([[t,e],[t+r,e],[t+r,e+a],[t,e+a]],n)}function S(t,e,r){var a=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),n=Math.max(r.curveStepCount,r.curveStepCount/Math.sqrt(200)*a),i=2*Math.PI/n,s=Math.abs(t/2),o=Math.abs(e/2),h=1-r.curveFitting;return{increment:i,rx:s+=W(s*h,r),ry:o+=W(o*h,r)}}function O(t,e,r,a){var n=N(a.increment,t,e,a.rx,a.ry,1,a.increment*E(.1,E(.4,1,r),r),r),i=n[0],s=n[1],o=N(a.increment,t,e,a.rx,a.ry,1.5,0,r)[0],h=q(i,null,r),u=q(o,null,r);return{estimatedPoints:s,opset:{type:"path",ops:h.concat(u)}}}function T(t,e,r,a,n,i,s,o,h){var u=t,c=e,l=Math.abs(r/2),p=Math.abs(a/2);l+=W(.01*l,h),p+=W(.01*p,h);for(var f=n,d=i;f<0;)f+=2*Math.PI,d+=2*Math.PI;d-f>2*Math.PI&&(f=0,d=2*Math.PI);var v=2*Math.PI/h.curveStepCount,g=Math.min(v/2,(d-f)/2),y=L(g,u,c,l,p,f,d,1,h),b=L(g,u,c,l,p,f,d,1.5,h),_=y.concat(b);return s&&(o?_=(_=_.concat(R(u,c,u+l*Math.cos(f),c+p*Math.sin(f),h))).concat(R(u,c,u+l*Math.cos(d),c+p*Math.sin(d),h)):(_.push({op:"lineTo",data:[u,c]}),_.push({op:"lineTo",data:[u+l*Math.cos(f),c+p*Math.sin(f)]}))),{type:"path",ops:_}}function C(t,e){var r=[];if(t.length){var a=e.maxRandomnessOffset||0,n=t.length;if(n>2){r.push({op:"move",data:[t[0][0]+W(a,e),t[0][1]+W(a,e)]});for(var i=1;i<n;i++)r.push({op:"lineTo",data:[t[i][0]+W(a,e),t[i][1]+W(a,e)]})}}return{type:"fillPath",ops:r}}function z(t,e){return function(t,e){var r=t.fillStyle||"hachure";if(!m[r])switch(r){case"zigzag":m[r]||(m[r]=new v(e));break;case"cross-hatch":m[r]||(m[r]=new g(e));break;case"dots":m[r]||(m[r]=new y(e));break;case"dashed":m[r]||(m[r]=new b(e));break;case"zigzag-line":m[r]||(m[r]=new _(e));break;case"hachure":default:m[r="hachure"]||(m[r]=new d(e))}return m[r]}(e,x).fillPolygon(t,e)}function A(t){return t.randomizer||(t.randomizer=new M(t.seed||0)),t.randomizer.next()}function E(t,e,r){return r.roughness*r.roughnessGain*(A(r)*(e-t)+t)}function W(t,e){return E(-t,t,e)}function R(t,e,r,a,n){var i=D(t,e,r,a,n,!0,!1),s=D(t,e,r,a,n,!0,!0);return i.concat(s)}function D(t,e,r,a,n,i,s){var o=Math.pow(t-r,2)+Math.pow(e-a,2),h=Math.sqrt(o);n.roughnessGain=h<200?1:h>500?.4:-.0016668*h+1.233334;var u=n.maxRandomnessOffset||0;u*u*100>o&&(u=h/10);var c=u/2,l=.2+.2*A(n),p=n.bowing*n.maxRandomnessOffset*(a-e)/200,f=n.bowing*n.maxRandomnessOffset*(t-r)/200;p=W(p,n),f=W(f,n);var d=[],v=function(){return W(c,n)},g=function(){return W(u,n)};return i&&(s?d.push({op:"move",data:[t+v(),e+v()]}):d.push({op:"move",data:[t+W(u,n),e+W(u,n)]})),s?d.push({op:"bcurveTo",data:[p+t+(r-t)*l+v(),f+e+(a-e)*l+v(),p+t+2*(r-t)*l+v(),f+e+2*(a-e)*l+v(),r+v(),a+v()]}):d.push({op:"bcurveTo",data:[p+t+(r-t)*l+g(),f+e+(a-e)*l+g(),p+t+2*(r-t)*l+g(),f+e+2*(a-e)*l+g(),r+g(),a+g()]}),d}function I(t,e,r){var a=[];a.push([t[0][0]+W(e,r),t[0][1]+W(e,r)]),a.push([t[0][0]+W(e,r),t[0][1]+W(e,r)]);for(var n=1;n<t.length;n++)a.push([t[n][0]+W(e,r),t[n][1]+W(e,r)]),n===t.length-1&&a.push([t[n][0]+W(e,r),t[n][1]+W(e,r)]);return q(a,null,r)}function q(t,e,r){var a=t.length,n=[];if(a>3){var i=[],s=1-r.curveTightness;n.push({op:"move",data:[t[1][0],t[1][1]]});for(var o=1;o+2<a;o++){var h=t[o];i[0]=[h[0],h[1]],i[1]=[h[0]+(s*t[o+1][0]-s*t[o-1][0])/6,h[1]+(s*t[o+1][1]-s*t[o-1][1])/6],i[2]=[t[o+1][0]+(s*t[o][0]-s*t[o+2][0])/6,t[o+1][1]+(s*t[o][1]-s*t[o+2][1])/6],i[3]=[t[o+1][0],t[o+1][1]],n.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}if(e&&2===e.length){var u=r.maxRandomnessOffset;n.push({op:"lineTo",data:[e[0]+W(u,r),e[1]+W(u,r)]})}}else 3===a?(n.push({op:"move",data:[t[1][0],t[1][1]]}),n.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===a&&(n=n.concat(R(t[0][0],t[0][1],t[1][0],t[1][1],r)));return n}function N(t,e,r,a,n,i,s,o){var h=[],u=[],c=W(.5,o)-Math.PI/2;u.push([W(i,o)+e+.9*a*Math.cos(c-t),W(i,o)+r+.9*n*Math.sin(c-t)]);for(var l=c;l<2*Math.PI+c-.01;l+=t){var p=[W(i,o)+e+a*Math.cos(l),W(i,o)+r+n*Math.sin(l)];h.push(p),u.push(p)}return u.push([W(i,o)+e+a*Math.cos(c+2*Math.PI+.5*s),W(i,o)+r+n*Math.sin(c+2*Math.PI+.5*s)]),u.push([W(i,o)+e+.98*a*Math.cos(c+s),W(i,o)+r+.98*n*Math.sin(c+s)]),u.push([W(i,o)+e+.9*a*Math.cos(c+.5*s),W(i,o)+r+.9*n*Math.sin(c+.5*s)]),[u,h]}function L(t,e,r,a,n,i,s,o,h){var u=i+W(.1,h),c=[];c.push([W(o,h)+e+.9*a*Math.cos(u-t),W(o,h)+r+.9*n*Math.sin(u-t)]);for(var l=u;l<=s;l+=t)c.push([W(o,h)+e+a*Math.cos(l),W(o,h)+r+n*Math.sin(l)]);return c.push([e+a*Math.cos(s),r+n*Math.sin(s)]),c.push([e+a*Math.cos(s),r+n*Math.sin(s)]),q(c,null,h)}function j(t,e,r,a,n,i,s,o){for(var h=[],u=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.5],c=[0,0],l=0;l<2;l++)0===l?h.push({op:"move",data:[s.x,s.y]}):h.push({op:"move",data:[s.x+W(u[0],o),s.y+W(u[0],o)]}),c=[n+W(u[l],o),i+W(u[l],o)],h.push({op:"bcurveTo",data:[t+W(u[l],o),e+W(u[l],o),r+W(u[l],o),a+W(u[l],o),c[0],c[1]]});return s.setPosition(c[0],c[1]),h}function B(t,e,r,a){var n=[];switch(e.key){case"M":case"m":var i="m"===e.key;if(e.data.length>=2){var s=+e.data[0],o=+e.data[1];i&&(s+=t.x,o+=t.y);var h=1*(a.maxRandomnessOffset||0);s+=W(h,a),o+=W(h,a),t.setPosition(s,o),n.push({op:"move",data:[s,o]})}break;case"L":case"l":i="l"===e.key;if(e.data.length>=2){s=+e.data[0],o=+e.data[1];i&&(s+=t.x,o+=t.y),n=n.concat(R(t.x,t.y,s,o,a)),t.setPosition(s,o)}break;case"H":case"h":i="h"===e.key;if(e.data.length){s=+e.data[0];i&&(s+=t.x),n=n.concat(R(t.x,t.y,s,t.y,a)),t.setPosition(s,t.y)}break;case"V":case"v":i="v"===e.key;if(e.data.length){o=+e.data[0];i&&(o+=t.y),n=n.concat(R(t.x,t.y,t.x,o,a)),t.setPosition(t.x,o)}break;case"Z":case"z":t.first&&(n=n.concat(R(t.x,t.y,t.first[0],t.first[1],a)),t.setPosition(t.first[0],t.first[1]),t.first=null);break;case"C":case"c":i="c"===e.key;if(e.data.length>=6){var c=+e.data[0],l=+e.data[1],p=+e.data[2],f=+e.data[3];s=+e.data[4],o=+e.data[5];i&&(c+=t.x,p+=t.x,s+=t.x,l+=t.y,f+=t.y,o+=t.y);var d=j(c,l,p,f,s,o,t,a);n=n.concat(d),t.bezierReflectionPoint=[s+(s-p),o+(o-f)]}break;case"S":case"s":i="s"===e.key;if(e.data.length>=4){p=+e.data[0],f=+e.data[1],s=+e.data[2],o=+e.data[3];i&&(p+=t.x,s+=t.x,f+=t.y,o+=t.y);c=p,l=f;var v=null;"c"!==(_=r?r.key:"")&&"C"!==_&&"s"!==_&&"S"!==_||(v=t.bezierReflectionPoint),v&&(c=v[0],l=v[1]);d=j(c,l,p,f,s,o,t,a);n=n.concat(d),t.bezierReflectionPoint=[s+(s-p),o+(o-f)]}break;case"Q":case"q":i="q"===e.key;if(e.data.length>=4){c=+e.data[0],l=+e.data[1],s=+e.data[2],o=+e.data[3];i&&(c+=t.x,s+=t.x,l+=t.y,o+=t.y);var g=1*(1+.2*a.roughness),y=1.5*(1+.22*a.roughness);n.push({op:"move",data:[t.x+W(g,a),t.y+W(g,a)]});var b=[s+W(g,a),o+W(g,a)];n.push({op:"qcurveTo",data:[c+W(g,a),l+W(g,a),b[0],b[1]]}),n.push({op:"move",data:[t.x+W(y,a),t.y+W(y,a)]}),b=[s+W(y,a),o+W(y,a)],n.push({op:"qcurveTo",data:[c+W(y,a),l+W(y,a),b[0],b[1]]}),t.setPosition(b[0],b[1]),t.quadReflectionPoint=[s+(s-c),o+(o-l)]}break;case"T":case"t":i="t"===e.key;if(e.data.length>=2){s=+e.data[0],o=+e.data[1];i&&(s+=t.x,o+=t.y);var _;c=s,l=o,v=null;"q"!==(_=r?r.key:"")&&"Q"!==_&&"t"!==_&&"T"!==_||(v=t.quadReflectionPoint),v&&(c=v[0],l=v[1]);g=1*(1+.2*a.roughness),y=1.5*(1+.22*a.roughness);n.push({op:"move",data:[t.x+W(g,a),t.y+W(g,a)]});b=[s+W(g,a),o+W(g,a)];n.push({op:"qcurveTo",data:[c+W(g,a),l+W(g,a),b[0],b[1]]}),n.push({op:"move",data:[t.x+W(y,a),t.y+W(y,a)]}),b=[s+W(y,a),o+W(y,a)],n.push({op:"qcurveTo",data:[c+W(y,a),l+W(y,a),b[0],b[1]]}),t.setPosition(b[0],b[1]),t.quadReflectionPoint=[s+(s-c),o+(o-l)]}break;case"A":case"a":i="a"===e.key;if(e.data.length>=7){var m=+e.data[0],M=+e.data[1],x=+e.data[2],k=+e.data[3],P=+e.data[4];s=+e.data[5],o=+e.data[6];if(i&&(s+=t.x,o+=t.y),s===t.x&&o===t.y)break;if(0===m||0===M)n=n.concat(R(t.x,t.y,s,o,a)),t.setPosition(s,o);else for(var w=0;w<1;w++)for(var S=new u([t.x,t.y],[s,o],[m,M],x,!!k,!!P),O=S.getNextSegment();O;){d=j(O.cp1[0],O.cp1[1],O.cp2[0],O.cp2[1],O.to[0],O.to[1],t,a);n=n.concat(d),O=S.getNextSegment()}}}return n}var G="undefined"!=typeof self,V="none",Q=function(){function e(t,e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,roughnessGain:1},this.config=t||{},this.surface=e,this.config.options&&(this.defaultOptions=this._options(this.config.options))}return e.newSeed=function(){return Math.floor(Math.random()*Math.pow(2,31))},e.prototype._options=function(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions},e.prototype._drawable=function(t,e,r){return{shape:t,sets:e||[],options:r||this.defaultOptions}},e.prototype.line=function(t,e,r,a,n){var i=this._options(n);return this._drawable("line",[k(t,e,r,a,i)],i)},e.prototype.rectangle=function(t,e,r,a,n){var i=this._options(n),s=[],o=w(t,e,r,a,i);if(i.fill){var h=[[t,e],[t+r,e],[t+r,e+a],[t,e+a]];"solid"===i.fillStyle?s.push(C(h,i)):s.push(z(h,i))}return i.stroke!==V&&s.push(o),this._drawable("rectangle",s,i)},e.prototype.ellipse=function(t,e,r,a,n){var i=this._options(n),s=[],o=S(r,a,i),h=O(t,e,i,o);if(i.fill)if("solid"===i.fillStyle){var u=O(t,e,i,o).opset;u.type="fillPath",s.push(u)}else s.push(z(h.estimatedPoints,i));return i.stroke!==V&&s.push(h.opset),this._drawable("ellipse",s,i)},e.prototype.circle=function(t,e,r,a){var n=this.ellipse(t,e,r,r,a);return n.shape="circle",n},e.prototype.linearPath=function(t,e){var r=this._options(e);return this._drawable("linearPath",[P(t,!1,r)],r)},e.prototype.arc=function(t,e,r,a,n,i,s,o){void 0===s&&(s=!1);var h=this._options(o),u=[],c=T(t,e,r,a,n,i,s,!0,h);if(s&&h.fill)if("solid"===h.fillStyle){var l=T(t,e,r,a,n,i,!0,!1,h);l.type="fillPath",u.push(l)}else u.push(function(t,e,r,a,n,i,s){var o=t,h=e,u=Math.abs(r/2),c=Math.abs(a/2);u+=W(.01*u,s),c+=W(.01*c,s);for(var l=n,p=i;l<0;)l+=2*Math.PI,p+=2*Math.PI;p-l>2*Math.PI&&(l=0,p=2*Math.PI);for(var f=(p-l)/s.curveStepCount,d=[],v=l;v<=p;v+=f)d.push([o+u*Math.cos(v),h+c*Math.sin(v)]);return d.push([o+u*Math.cos(p),h+c*Math.sin(p)]),d.push([o,h]),z(d,s)}(t,e,r,a,n,i,h));return h.stroke!==V&&u.push(c),this._drawable("arc",u,h)},e.prototype.curve=function(t,e){var r=this._options(e),a=[],i=function(t,e){var r=I(t,1*(1+.2*e.roughness),e),a=I(t,1.5*(1+.22*e.roughness),e);return{type:"path",ops:r.concat(a)}}(t,r);if(r.fill&&r.fill!==V){var s=function(t,e){var r=[];return t.length>=3&&I(t,1*(1+.2*e.roughness),e).forEach((function(t){switch(t.op){case"move":r.push([t.data[0],t.data[1]]);break;case"bcurveTo":r.push([t.data[0],t.data[1]]),r.push([t.data[2],t.data[3]]),r.push([t.data[4],t.data[5]])}})),r}(t,r);if(s.length>=4){var o=function(t,e){for(var r=[],a=(t.length-1)/3,i=0;i<a;i++){n(t,3*i,e,r)}return r}(s,Math.max(50,50*r.roughness));"solid"===r.fillStyle?a.push(C(o,r)):a.push(z(o,r))}}return r.stroke!==V&&a.push(i),this._drawable("curve",a,r)},e.prototype.polygon=function(t,e){var r=this._options(e),a=[],n=P(t,!0,r);return r.fill&&("solid"===r.fillStyle?a.push(C(t,r)):a.push(z(t,r))),r.stroke!==V&&a.push(n),this._drawable("polygon",a,r)},e.prototype.path=function(t,e){var r=this._options(e),a=[];if(!t)return this._drawable("path",a,r);var n=function(t,e){t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");var r=new h(t);if(e.simplification){var a=new c(r.linearPoints,r.closed).fit(e.simplification);r=new h(a)}for(var n=[],i=r.segments||[],s=0;s<i.length;s++){var o=B(r,i[s],s>0?i[s-1]:null,e);o&&o.length&&(n=n.concat(o))}return{type:"path",ops:n}}(t,r);if(r.fill)if("solid"===r.fillStyle){var i={type:"path2Dfill",path:t,ops:[]};a.push(i)}else{var s=this.computePathSize(t);(i=z([[0,0],[s[0],0],[s[0],s[1]],[0,s[1]]],r)).type="path2Dpattern",i.size=s,i.path=t,a.push(i)}return r.stroke!==V&&a.push(n),this._drawable("path",a,r)},e.prototype.computePathSize=function(e){var r=[0,0];if(G&&self.document)try{var a=self.document.createElementNS(t,"svg");a.setAttribute("width","0"),a.setAttribute("height","0");var n=self.document.createElementNS(t,"path");n.setAttribute("d",e),a.appendChild(n),self.document.body.appendChild(a);var i=n.getBBox();i&&(r[0]=i.width||0,r[1]=i.height||0),self.document.body.removeChild(a)}catch(t){}var s=this.getCanvasSize();return r[0]*r[1]||(r=s),r},e.prototype.getCanvasSize=function(){var t=function(t){return t&&"object"==typeof t&&t.baseVal&&t.baseVal.value?t.baseVal.value:t||100};return this.surface?[t(this.surface.width),t(this.surface.height)]:[100,100]},e.prototype.opsToPath=function(t){for(var e="",r=0,a=t.ops;r<a.length;r++){var n=a[r],i=n.data;switch(n.op){case"move":e+="M"+i[0]+" "+i[1]+" ";break;case"bcurveTo":e+="C"+i[0]+" "+i[1]+", "+i[2]+" "+i[3]+", "+i[4]+" "+i[5]+" ";break;case"qcurveTo":e+="Q"+i[0]+" "+i[1]+", "+i[2]+" "+i[3]+" ";break;case"lineTo":e+="L"+i[0]+" "+i[1]+" "}}return e.trim()},e.prototype.toPaths=function(t){for(var e=t.sets||[],r=t.options||this.defaultOptions,a=[],n=0,i=e;n<i.length;n++){var s=i[n],o=null;switch(s.type){case"path":o={d:this.opsToPath(s),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:V};break;case"fillPath":o={d:this.opsToPath(s),stroke:V,strokeWidth:0,fill:r.fill||V};break;case"fillSketch":o=this.fillSketch(s,r);break;case"path2Dfill":o={d:s.path||"",stroke:V,strokeWidth:0,fill:r.fill||V};break;case"path2Dpattern":var h=s.size,u={x:0,y:0,width:1,height:1,viewBox:"0 0 "+Math.round(h[0])+" "+Math.round(h[1]),patternUnits:"objectBoundingBox",path:this.fillSketch(s,r)};o={d:s.path,stroke:V,strokeWidth:0,pattern:u}}o&&a.push(o)}return a},e.prototype.fillSketch=function(t,e){var r=e.fillWeight;return r<0&&(r=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||V,strokeWidth:r,fill:V}},e}(),U="undefined"!=typeof document,Z=function(){function e(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Q(e,this.canvas)}return e.prototype.draw=function(t){for(var e=t.sets||[],r=t.options||this.getDefaultOptions(),a=this.ctx,n=0,i=e;n<i.length;n++){var s=i[n];switch(s.type){case"path":a.save(),a.strokeStyle="none"===r.stroke?"transparent":r.stroke,a.lineWidth=r.strokeWidth,this._drawToContext(a,s),a.restore();break;case"fillPath":a.save(),a.fillStyle=r.fill||"";var o="curve"===t.shape||"polygon"===t.shape?"evenodd":"nonzero";this._drawToContext(a,s,o),a.restore();break;case"fillSketch":this.fillSketch(a,s,r);break;case"path2Dfill":this.ctx.save(),this.ctx.fillStyle=r.fill||"";var h=new Path2D(s.path);this.ctx.fill(h,"evenodd"),this.ctx.restore();break;case"path2Dpattern":var u=this.canvas.ownerDocument||U&&document;if(u){var c=s.size,l=u.createElement("canvas"),p=l.getContext("2d"),f=this.computeBBox(s.path);f&&(f.width||f.height)?(l.width=this.canvas.width,l.height=this.canvas.height,p.translate(f.x||0,f.y||0)):(l.width=c[0],l.height=c[1]),this.fillSketch(p,s,r),this.ctx.save(),this.ctx.fillStyle=this.ctx.createPattern(l,"repeat");h=new Path2D(s.path);this.ctx.fill(h,"evenodd"),this.ctx.restore()}else console.error("Pattern fill fail: No defs")}}},e.prototype.computeBBox=function(e){if(U)try{var r=document.createElementNS(t,"svg");r.setAttribute("width","0"),r.setAttribute("height","0");var a=self.document.createElementNS(t,"path");a.setAttribute("d",e),r.appendChild(a),document.body.appendChild(r);var n=a.getBBox();return document.body.removeChild(r),n}catch(t){}return null},e.prototype.fillSketch=function(t,e,r){var a=r.fillWeight;a<0&&(a=r.strokeWidth/2),t.save(),t.strokeStyle=r.fill||"",t.lineWidth=a,this._drawToContext(t,e),t.restore()},e.prototype._drawToContext=function(t,e,r){void 0===r&&(r="nonzero"),t.beginPath();for(var a=0,n=e.ops;a<n.length;a++){var i=n[a],s=i.data;switch(i.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"qcurveTo":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"lineTo":t.lineTo(s[0],s[1])}}"fillPath"===e.type?t.fill(r):t.stroke()},Object.defineProperty(e.prototype,"generator",{get:function(){return this.gen},enumerable:!0,configurable:!0}),e.prototype.getDefaultOptions=function(){return this.gen.defaultOptions},e.prototype.line=function(t,e,r,a,n){var i=this.gen.line(t,e,r,a,n);return this.draw(i),i},e.prototype.rectangle=function(t,e,r,a,n){var i=this.gen.rectangle(t,e,r,a,n);return this.draw(i),i},e.prototype.ellipse=function(t,e,r,a,n){var i=this.gen.ellipse(t,e,r,a,n);return this.draw(i),i},e.prototype.circle=function(t,e,r,a){var n=this.gen.circle(t,e,r,a);return this.draw(n),n},e.prototype.linearPath=function(t,e){var r=this.gen.linearPath(t,e);return this.draw(r),r},e.prototype.polygon=function(t,e){var r=this.gen.polygon(t,e);return this.draw(r),r},e.prototype.arc=function(t,e,r,a,n,i,s,o){void 0===s&&(s=!1);var h=this.gen.arc(t,e,r,a,n,i,s,o);return this.draw(h),h},e.prototype.curve=function(t,e){var r=this.gen.curve(t,e);return this.draw(r),r},e.prototype.path=function(t,e){var r=this.gen.path(t,e);return this.draw(r),r},e}(),$="undefined"!=typeof document,F=function(){function e(t,e){this.svg=t,this.gen=new Q(e,this.svg)}return Object.defineProperty(e.prototype,"defs",{get:function(){var e=this.svg.ownerDocument||$&&document;if(e&&!this._defs){var r=e.createElementNS(t,"defs");this.svg.firstChild?this.svg.insertBefore(r,this.svg.firstChild):this.svg.appendChild(r),this._defs=r}return this._defs||null},enumerable:!0,configurable:!0}),e.prototype.draw=function(e){for(var r=e.sets||[],a=e.options||this.getDefaultOptions(),n=this.svg.ownerDocument||window.document,i=n.createElementNS(t,"g"),s=0,o=r;s<o.length;s++){var h=o[s],u=null;switch(h.type){case"path":(u=n.createElementNS(t,"path")).setAttribute("d",this.opsToPath(h)),u.style.stroke=a.stroke,u.style.strokeWidth=a.strokeWidth+"",u.style.fill="none";break;case"fillPath":(u=n.createElementNS(t,"path")).setAttribute("d",this.opsToPath(h)),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill=a.fill||"";break;case"fillSketch":u=this.fillSketch(n,h,a);break;case"path2Dfill":(u=n.createElementNS(t,"path")).setAttribute("d",h.path||""),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill=a.fill||"";break;case"path2Dpattern":if(this.defs){var c=h.size,l=n.createElementNS(t,"pattern"),p="rough-"+Math.floor(Math.random()*(Number.MAX_SAFE_INTEGER||999999));l.setAttribute("id",p),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("width","1"),l.setAttribute("height","1"),l.setAttribute("height","1"),l.setAttribute("viewBox","0 0 "+Math.round(c[0])+" "+Math.round(c[1])),l.setAttribute("patternUnits","objectBoundingBox");var f=this.fillSketch(n,h,a);l.appendChild(f),this.defs.appendChild(l),(u=n.createElementNS(t,"path")).setAttribute("d",h.path||""),u.style.stroke="none",u.style.strokeWidth="0",u.style.fill="url(#"+p+")"}else console.error("Pattern fill fail: No defs")}u&&i.appendChild(u)}return i},e.prototype.fillSketch=function(e,r,a){var n=a.fillWeight;n<0&&(n=a.strokeWidth/2);var i=e.createElementNS(t,"path");return i.setAttribute("d",this.opsToPath(r)),i.style.stroke=a.fill||"",i.style.strokeWidth=n+"",i.style.fill="none",i},Object.defineProperty(e.prototype,"generator",{get:function(){return this.gen},enumerable:!0,configurable:!0}),e.prototype.getDefaultOptions=function(){return this.gen.defaultOptions},e.prototype.opsToPath=function(t){return this.gen.opsToPath(t)},e.prototype.line=function(t,e,r,a,n){var i=this.gen.line(t,e,r,a,n);return this.draw(i)},e.prototype.rectangle=function(t,e,r,a,n){var i=this.gen.rectangle(t,e,r,a,n);return this.draw(i)},e.prototype.ellipse=function(t,e,r,a,n){var i=this.gen.ellipse(t,e,r,a,n);return this.draw(i)},e.prototype.circle=function(t,e,r,a){var n=this.gen.circle(t,e,r,a);return this.draw(n)},e.prototype.linearPath=function(t,e){var r=this.gen.linearPath(t,e);return this.draw(r)},e.prototype.polygon=function(t,e){var r=this.gen.polygon(t,e);return this.draw(r)},e.prototype.arc=function(t,e,r,a,n,i,s,o){void 0===s&&(s=!1);var h=this.gen.arc(t,e,r,a,n,i,s,o);return this.draw(h)},e.prototype.curve=function(t,e){var r=this.gen.curve(t,e);return this.draw(r)},e.prototype.path=function(t,e){var r=this.gen.path(t,e);return this.draw(r)},e}(),H={canvas:function(t,e){return new Z(t,e)},svg:function(t,e){return new F(t,e)},generator:function(t,e){return new Q(t,e)},newSeed:function(){return Q.newSeed()}};module.exports=H;
