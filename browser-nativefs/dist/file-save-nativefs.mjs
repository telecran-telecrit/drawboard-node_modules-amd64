// @license Â© 2020 Google LLC. Licensed under the Apache License, Version 2.0.
export default async(e,t={},a=null)=>{try{t.fileName=t.fileName||"Untitled",a=a||await window.chooseFileSystemEntries({type:"save-file",accepts:[{description:t.description||"",mimeTypes:[e.type]}]});const i=await a.createWriter();await i.truncate(0),await i.write(0,e),await i.close()}catch(i){if(!/not a valid enum value/.test(i.message))throw i;try{if(t.fileName=t.fileName||"Untitled","createWriter"in(a=a||await window.chooseFileSystemEntries({type:"saveFile",accepts:[{description:t.description||"",mimeTypes:[e.type]}]}))){const t=await a.createWriter();await t.truncate(0),await t.write(0,e),await t.close()}else{const t=await a.createWritable();await t.write(e),await t.close()}}catch(e){throw e}}};